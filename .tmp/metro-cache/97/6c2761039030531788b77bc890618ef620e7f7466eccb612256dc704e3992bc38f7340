{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":88,"column":52,"index":3742}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":23,"index":161},"end":{"line":4,"column":58,"index":196}}],"key":"Y/n4m+r52hYXgM0UylfgsDfMHzI="}},{"name":"../../utils/observe.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":5,"column":21,"index":219},"end":{"line":5,"column":54,"index":252}}],"key":"9z050nEdFILKTMfymV7zJZ6lURs="}},{"name":"../../utils/poll.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":6,"column":18,"index":272},"end":{"line":6,"column":48,"index":302}}],"key":"aFz40K9Gats0dF3I4D9bTgnkP2g="}},{"name":"../../utils/stringify.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":7,"column":23,"index":327},"end":{"line":7,"column":58,"index":362}}],"key":"BiwI/CxF6p7AvUS4qiSnljjpNnY="}},{"name":"./createPendingTransactionFilter.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":8,"column":44,"index":408},"end":{"line":8,"column":90,"index":454}}],"key":"ye+i3M4CJ9XKiwDDu1nBEZXOqM0="}},{"name":"./getFilterChanges.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":9,"column":30,"index":486},"end":{"line":9,"column":62,"index":518}}],"key":"IhGF6Obolw7H6itKWpSAilcCQ6c="}},{"name":"./uninstallFilter.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":10,"column":29,"index":549},"end":{"line":10,"column":60,"index":580}}],"key":"Rb1zxdx2IuV1q7hcNfrn2Ha7MaE="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _asyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.watchPendingTransactions = watchPendingTransactions;\n  var getAction_js_1 = require(_dependencyMap[1], \"../../utils/getAction.js\");\n  var observe_js_1 = require(_dependencyMap[2], \"../../utils/observe.js\");\n  var poll_js_1 = require(_dependencyMap[3], \"../../utils/poll.js\");\n  var stringify_js_1 = require(_dependencyMap[4], \"../../utils/stringify.js\");\n  var createPendingTransactionFilter_js_1 = require(_dependencyMap[5], \"./createPendingTransactionFilter.js\");\n  var getFilterChanges_js_1 = require(_dependencyMap[6], \"./getFilterChanges.js\");\n  var uninstallFilter_js_1 = require(_dependencyMap[7], \"./uninstallFilter.js\");\n  function watchPendingTransactions(client, _ref) {\n    var _ref$batch = _ref.batch,\n      batch = _ref$batch === void 0 ? true : _ref$batch,\n      onError = _ref.onError,\n      onTransactions = _ref.onTransactions,\n      poll_ = _ref.poll,\n      _ref$pollingInterval = _ref.pollingInterval,\n      pollingInterval = _ref$pollingInterval === void 0 ? client.pollingInterval : _ref$pollingInterval;\n    var enablePolling = typeof poll_ !== 'undefined' ? poll_ : client.transport.type !== 'webSocket';\n    var pollPendingTransactions = () => {\n      var observerId = (0, stringify_js_1.stringify)(['watchPendingTransactions', client.uid, batch, pollingInterval]);\n      return (0, observe_js_1.observe)(observerId, {\n        onTransactions,\n        onError\n      }, emit => {\n        var filter;\n        var unwatch = (0, poll_js_1.poll)(/*#__PURE__*/_asyncToGenerator(function* () {\n          try {\n            if (!filter) {\n              try {\n                filter = yield (0, getAction_js_1.getAction)(client, createPendingTransactionFilter_js_1.createPendingTransactionFilter, 'createPendingTransactionFilter')({});\n                return;\n              } catch (err) {\n                unwatch();\n                throw err;\n              }\n            }\n            var hashes = yield (0, getAction_js_1.getAction)(client, getFilterChanges_js_1.getFilterChanges, 'getFilterChanges')({\n              filter\n            });\n            if (hashes.length === 0) return;\n            if (batch) emit.onTransactions(hashes);else for (var hash of hashes) emit.onTransactions([hash]);\n          } catch (err) {\n            emit.onError?.(err);\n          }\n        }), {\n          emitOnBegin: true,\n          interval: pollingInterval\n        });\n        return /*#__PURE__*/_asyncToGenerator(function* () {\n          if (filter) yield (0, getAction_js_1.getAction)(client, uninstallFilter_js_1.uninstallFilter, 'uninstallFilter')({\n            filter\n          });\n          unwatch();\n        });\n      });\n    };\n    var subscribePendingTransactions = () => {\n      var active = true;\n      var unsubscribe = () => active = false;\n      _asyncToGenerator(function* () {\n        try {\n          var _yield$client$transpo = yield client.transport.subscribe({\n              params: ['newPendingTransactions'],\n              onData(data) {\n                if (!active) return;\n                var transaction = data.result;\n                onTransactions([transaction]);\n              },\n              onError(error) {\n                onError?.(error);\n              }\n            }),\n            unsubscribe_ = _yield$client$transpo.unsubscribe;\n          unsubscribe = unsubscribe_;\n          if (!active) unsubscribe();\n        } catch (err) {\n          onError?.(err);\n        }\n      })();\n      return () => unsubscribe();\n    };\n    return enablePolling ? pollPendingTransactions() : subscribePendingTransactions();\n  }\n});","lineCount":90,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_asyncToGenerator"],[4,23,1,13],[4,26,1,13,"require"],[4,33,1,13],[4,34,1,13,"_dependencyMap"],[4,48,1,13],[5,2,2,0,"Object"],[5,8,2,6],[5,9,2,7,"defineProperty"],[5,23,2,21],[5,24,2,22,"exports"],[5,31,2,29],[5,33,2,31],[5,45,2,43],[5,47,2,45],[6,4,2,47,"value"],[6,9,2,52],[6,11,2,54],[7,2,2,59],[7,3,2,60],[7,4,2,61],[8,2,3,0,"exports"],[8,9,3,7],[8,10,3,8,"watchPendingTransactions"],[8,34,3,32],[8,37,3,35,"watchPendingTransactions"],[8,61,3,59],[9,2,4,0],[9,6,4,6,"getAction_js_1"],[9,20,4,20],[9,23,4,23,"require"],[9,30,4,30],[9,31,4,30,"_dependencyMap"],[9,45,4,30],[9,76,4,57],[9,77,4,58],[10,2,5,0],[10,6,5,6,"observe_js_1"],[10,18,5,18],[10,21,5,21,"require"],[10,28,5,28],[10,29,5,28,"_dependencyMap"],[10,43,5,28],[10,72,5,53],[10,73,5,54],[11,2,6,0],[11,6,6,6,"poll_js_1"],[11,15,6,15],[11,18,6,18,"require"],[11,25,6,25],[11,26,6,25,"_dependencyMap"],[11,40,6,25],[11,66,6,47],[11,67,6,48],[12,2,7,0],[12,6,7,6,"stringify_js_1"],[12,20,7,20],[12,23,7,23,"require"],[12,30,7,30],[12,31,7,30,"_dependencyMap"],[12,45,7,30],[12,76,7,57],[12,77,7,58],[13,2,8,0],[13,6,8,6,"createPendingTransactionFilter_js_1"],[13,41,8,41],[13,44,8,44,"require"],[13,51,8,51],[13,52,8,51,"_dependencyMap"],[13,66,8,51],[13,108,8,89],[13,109,8,90],[14,2,9,0],[14,6,9,6,"getFilterChanges_js_1"],[14,27,9,27],[14,30,9,30,"require"],[14,37,9,37],[14,38,9,37,"_dependencyMap"],[14,52,9,37],[14,80,9,61],[14,81,9,62],[15,2,10,0],[15,6,10,6,"uninstallFilter_js_1"],[15,26,10,26],[15,29,10,29,"require"],[15,36,10,36],[15,37,10,36,"_dependencyMap"],[15,51,10,36],[15,78,10,59],[15,79,10,60],[16,2,11,0],[16,11,11,9,"watchPendingTransactions"],[16,35,11,33,"watchPendingTransactions"],[16,36,11,34,"client"],[16,42,11,40],[16,44,11,40,"_ref"],[16,48,11,40],[16,50,11,141],[17,4,11,141],[17,8,11,141,"_ref$batch"],[17,18,11,141],[17,21,11,141,"_ref"],[17,25,11,141],[17,26,11,44,"batch"],[17,31,11,49],[18,6,11,44,"batch"],[18,11,11,49],[18,14,11,49,"_ref$batch"],[18,24,11,49],[18,38,11,52],[18,42,11,56],[18,45,11,56,"_ref$batch"],[18,55,11,56],[19,6,11,58,"onError"],[19,13,11,65],[19,16,11,65,"_ref"],[19,20,11,65],[19,21,11,58,"onError"],[19,28,11,65],[20,6,11,67,"onTransactions"],[20,20,11,81],[20,23,11,81,"_ref"],[20,27,11,81],[20,28,11,67,"onTransactions"],[20,42,11,81],[21,6,11,89,"poll_"],[21,11,11,94],[21,14,11,94,"_ref"],[21,18,11,94],[21,19,11,83,"poll"],[21,23,11,87],[22,6,11,87,"_ref$pollingInterval"],[22,26,11,87],[22,29,11,87,"_ref"],[22,33,11,87],[22,34,11,96,"pollingInterval"],[22,49,11,111],[23,6,11,96,"pollingInterval"],[23,21,11,111],[23,24,11,111,"_ref$pollingInterval"],[23,44,11,111],[23,58,11,114,"client"],[23,64,11,120],[23,65,11,121,"pollingInterval"],[23,80,11,136],[23,83,11,136,"_ref$pollingInterval"],[23,103,11,136],[24,4,12,4],[24,8,12,10,"enablePolling"],[24,21,12,23],[24,24,12,26],[24,31,12,33,"poll_"],[24,36,12,38],[24,41,12,43],[24,52,12,54],[24,55,12,57,"poll_"],[24,60,12,62],[24,63,12,65,"client"],[24,69,12,71],[24,70,12,72,"transport"],[24,79,12,81],[24,80,12,82,"type"],[24,84,12,86],[24,89,12,91],[24,100,12,102],[25,4,13,4],[25,8,13,10,"pollPendingTransactions"],[25,31,13,33],[25,34,13,36,"pollPendingTransactions"],[25,35,13,36],[25,40,13,42],[26,6,14,8],[26,10,14,14,"observerId"],[26,20,14,24],[26,23,14,27],[26,24,14,28],[26,25,14,29],[26,27,14,31,"stringify_js_1"],[26,41,14,45],[26,42,14,46,"stringify"],[26,51,14,55],[26,53,14,57],[26,54,15,12],[26,80,15,38],[26,82,16,12,"client"],[26,88,16,18],[26,89,16,19,"uid"],[26,92,16,22],[26,94,17,12,"batch"],[26,99,17,17],[26,101,18,12,"pollingInterval"],[26,116,18,27],[26,117,19,9],[26,118,19,10],[27,6,20,8],[27,13,20,15],[27,14,20,16],[27,15,20,17],[27,17,20,19,"observe_js_1"],[27,29,20,31],[27,30,20,32,"observe"],[27,37,20,39],[27,39,20,41,"observerId"],[27,49,20,51],[27,51,20,53],[28,8,20,55,"onTransactions"],[28,22,20,69],[29,8,20,71,"onError"],[30,6,20,79],[30,7,20,80],[30,9,20,83,"emit"],[30,13,20,87],[30,17,20,92],[31,8,21,12],[31,12,21,16,"filter"],[31,18,21,22],[32,8,22,12],[32,12,22,18,"unwatch"],[32,19,22,25],[32,22,22,28],[32,23,22,29],[32,24,22,30],[32,26,22,32,"poll_js_1"],[32,35,22,41],[32,36,22,42,"poll"],[32,40,22,46],[32,55,22,46,"_asyncToGenerator"],[32,72,22,46],[32,73,22,48],[32,86,22,60],[33,10,23,16],[33,14,23,20],[34,12,24,20],[34,16,24,24],[34,17,24,25,"filter"],[34,23,24,31],[34,25,24,33],[35,14,25,24],[35,18,25,28],[36,16,26,28,"filter"],[36,22,26,34],[36,31,26,43],[36,32,26,44],[36,33,26,45],[36,35,26,47,"getAction_js_1"],[36,49,26,61],[36,50,26,62,"getAction"],[36,59,26,71],[36,61,26,73,"client"],[36,67,26,79],[36,69,26,81,"createPendingTransactionFilter_js_1"],[36,104,26,116],[36,105,26,117,"createPendingTransactionFilter"],[36,135,26,147],[36,137,26,149],[36,169,26,181],[36,170,26,182],[36,171,26,183],[36,172,26,184],[36,173,26,185],[36,174,26,186],[37,16,27,28],[38,14,28,24],[38,15,28,25],[38,16,29,24],[38,23,29,31,"err"],[38,26,29,34],[38,28,29,36],[39,16,30,28,"unwatch"],[39,23,30,35],[39,24,30,36],[39,25,30,37],[40,16,31,28],[40,22,31,34,"err"],[40,25,31,37],[41,14,32,24],[42,12,33,20],[43,12,34,20],[43,16,34,26,"hashes"],[43,22,34,32],[43,31,34,41],[43,32,34,42],[43,33,34,43],[43,35,34,45,"getAction_js_1"],[43,49,34,59],[43,50,34,60,"getAction"],[43,59,34,69],[43,61,34,71,"client"],[43,67,34,77],[43,69,34,79,"getFilterChanges_js_1"],[43,90,34,100],[43,91,34,101,"getFilterChanges"],[43,107,34,117],[43,109,34,119],[43,127,34,137],[43,128,34,138],[43,129,34,139],[44,14,34,141,"filter"],[45,12,34,148],[45,13,34,149],[45,14,34,150],[46,12,35,20],[46,16,35,24,"hashes"],[46,22,35,30],[46,23,35,31,"length"],[46,29,35,37],[46,34,35,42],[46,35,35,43],[46,37,36,24],[47,12,37,20],[47,16,37,24,"batch"],[47,21,37,29],[47,23,38,24,"emit"],[47,27,38,28],[47,28,38,29,"onTransactions"],[47,42,38,43],[47,43,38,44,"hashes"],[47,49,38,50],[47,50,38,51],[47,51,38,52],[47,56,40,24],[47,61,40,29],[47,65,40,35,"hash"],[47,69,40,39],[47,73,40,43,"hashes"],[47,79,40,49],[47,81,41,28,"emit"],[47,85,41,32],[47,86,41,33,"onTransactions"],[47,100,41,47],[47,101,41,48],[47,102,41,49,"hash"],[47,106,41,53],[47,107,41,54],[47,108,41,55],[48,10,42,16],[48,11,42,17],[48,12,43,16],[48,19,43,23,"err"],[48,22,43,26],[48,24,43,28],[49,12,44,20,"emit"],[49,16,44,24],[49,17,44,25,"onError"],[49,24,44,32],[49,27,44,35,"err"],[49,30,44,38],[49,31,44,39],[50,10,45,16],[51,8,46,12],[51,9,46,13],[51,12,46,15],[52,10,47,16,"emitOnBegin"],[52,21,47,27],[52,23,47,29],[52,27,47,33],[53,10,48,16,"interval"],[53,18,48,24],[53,20,48,26,"pollingInterval"],[54,8,49,12],[54,9,49,13],[54,10,49,14],[55,8,50,12],[55,28,50,12,"_asyncToGenerator"],[55,45,50,12],[55,46,50,19],[55,59,50,31],[56,10,51,16],[56,14,51,20,"filter"],[56,20,51,26],[56,22,52,20],[56,28,52,26],[56,29,52,27],[56,30,52,28],[56,32,52,30,"getAction_js_1"],[56,46,52,44],[56,47,52,45,"getAction"],[56,56,52,54],[56,58,52,56,"client"],[56,64,52,62],[56,66,52,64,"uninstallFilter_js_1"],[56,86,52,84],[56,87,52,85,"uninstallFilter"],[56,102,52,100],[56,104,52,102],[56,121,52,119],[56,122,52,120],[56,123,52,121],[57,12,52,123,"filter"],[58,10,52,130],[58,11,52,131],[58,12,52,132],[59,10,53,16,"unwatch"],[59,17,53,23],[59,18,53,24],[59,19,53,25],[60,8,54,12],[60,9,54,13],[61,6,55,8],[61,7,55,9],[61,8,55,10],[62,4,56,4],[62,5,56,5],[63,4,57,4],[63,8,57,10,"subscribePendingTransactions"],[63,36,57,38],[63,39,57,41,"subscribePendingTransactions"],[63,40,57,41],[63,45,57,47],[64,6,58,8],[64,10,58,12,"active"],[64,16,58,18],[64,19,58,21],[64,23,58,25],[65,6,59,8],[65,10,59,12,"unsubscribe"],[65,21,59,23],[65,24,59,26,"unsubscribe"],[65,25,59,26],[65,30,59,33,"active"],[65,36,59,39],[65,39,59,42],[65,44,59,48],[66,6,60,8,"_asyncToGenerator"],[66,23,60,8],[66,24,60,9],[66,37,60,21],[67,8,61,12],[67,12,61,16],[68,10,62,16],[68,14,62,16,"_yield$client$transpo"],[68,35,62,16],[68,44,62,60,"client"],[68,50,62,66],[68,51,62,67,"transport"],[68,60,62,76],[68,61,62,77,"subscribe"],[68,70,62,86],[68,71,62,87],[69,14,63,20,"params"],[69,20,63,26],[69,22,63,28],[69,23,63,29],[69,47,63,53],[69,48,63,54],[70,14,64,20,"onData"],[70,20,64,26,"onData"],[70,21,64,27,"data"],[70,25,64,31],[70,27,64,33],[71,16,65,24],[71,20,65,28],[71,21,65,29,"active"],[71,27,65,35],[71,29,66,28],[72,16,67,24],[72,20,67,30,"transaction"],[72,31,67,41],[72,34,67,44,"data"],[72,38,67,48],[72,39,67,49,"result"],[72,45,67,55],[73,16,68,24,"onTransactions"],[73,30,68,38],[73,31,68,39],[73,32,68,40,"transaction"],[73,43,68,51],[73,44,68,52],[73,45,68,53],[74,14,69,20],[74,15,69,21],[75,14,70,20,"onError"],[75,21,70,27,"onError"],[75,22,70,28,"error"],[75,27,70,33],[75,29,70,35],[76,16,71,24,"onError"],[76,23,71,31],[76,26,71,34,"error"],[76,31,71,39],[76,32,71,40],[77,14,72,20],[78,12,73,16],[78,13,73,17],[78,14,73,18],[79,12,62,37,"unsubscribe_"],[79,24,62,49],[79,27,62,49,"_yield$client$transpo"],[79,48,62,49],[79,49,62,24,"unsubscribe"],[79,60,62,35],[80,10,74,16,"unsubscribe"],[80,21,74,27],[80,24,74,30,"unsubscribe_"],[80,36,74,42],[81,10,75,16],[81,14,75,20],[81,15,75,21,"active"],[81,21,75,27],[81,23,76,20,"unsubscribe"],[81,34,76,31],[81,35,76,32],[81,36,76,33],[82,8,77,12],[82,9,77,13],[82,10,78,12],[82,17,78,19,"err"],[82,20,78,22],[82,22,78,24],[83,10,79,16,"onError"],[83,17,79,23],[83,20,79,26,"err"],[83,23,79,29],[83,24,79,30],[84,8,80,12],[85,6,81,8],[85,7,81,9],[85,9,81,11],[85,10,81,12],[86,6,82,8],[86,13,82,15],[86,19,82,21,"unsubscribe"],[86,30,82,32],[86,31,82,33],[86,32,82,34],[87,4,83,4],[87,5,83,5],[88,4,84,4],[88,11,84,11,"enablePolling"],[88,24,84,24],[88,27,85,10,"pollPendingTransactions"],[88,50,85,33],[88,51,85,34],[88,52,85,35],[88,55,86,10,"subscribePendingTransactions"],[88,83,86,38],[88,84,86,39],[88,85,86,40],[89,2,87,0],[90,0,87,1],[90,3]],"functionMap":{"names":["<global>","watchPendingTransactions","pollPendingTransactions","<anonymous>","subscribePendingTransactions","unsubscribe","client.transport.subscribe$argument_0.onData","client.transport.subscribe$argument_0.onError"],"mappings":"AAA;ACU;oCCE;kFCO;SDmC;KDC;yCGC;0BCE,sBD;SDC;oBGI;qBHK;oBIC;qBJE;SCS;eDC,mBC;KHC;CDI"}},"type":"js/module"}]}