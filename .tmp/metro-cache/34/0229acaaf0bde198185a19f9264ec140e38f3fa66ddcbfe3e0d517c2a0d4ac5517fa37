{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":33,"column":45,"index":1539}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"./utils.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":19,"index":143},"end":{"line":4,"column":40,"index":164}}],"key":"03VO7/E+L2S6CYQuFHTg8eKUrwk="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _asyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.parseAvatarRecord = parseAvatarRecord;\n  var utils_js_1 = require(_dependencyMap[1], \"./utils.js\");\n  function parseAvatarRecord(_x, _x2) {\n    return _parseAvatarRecord.apply(this, arguments);\n  }\n  function _parseAvatarRecord() {\n    _parseAvatarRecord = _asyncToGenerator(function* (client, _ref) {\n      var gatewayUrls = _ref.gatewayUrls,\n        record = _ref.record;\n      if (/eip155:/i.test(record)) return parseNftAvatarUri(client, {\n        gatewayUrls,\n        record\n      });\n      return (0, utils_js_1.parseAvatarUri)({\n        uri: record,\n        gatewayUrls\n      });\n    });\n    return _parseAvatarRecord.apply(this, arguments);\n  }\n  function parseNftAvatarUri(_x3, _x4) {\n    return _parseNftAvatarUri.apply(this, arguments);\n  }\n  function _parseNftAvatarUri() {\n    _parseNftAvatarUri = _asyncToGenerator(function* (client, _ref2) {\n      var gatewayUrls = _ref2.gatewayUrls,\n        record = _ref2.record;\n      var nft = (0, utils_js_1.parseNftUri)(record);\n      var nftUri = yield (0, utils_js_1.getNftTokenUri)(client, {\n        nft\n      });\n      var _ref3 = (0, utils_js_1.resolveAvatarUri)({\n          uri: nftUri,\n          gatewayUrls\n        }),\n        resolvedNftUri = _ref3.uri,\n        isOnChain = _ref3.isOnChain,\n        isEncoded = _ref3.isEncoded;\n      if (isOnChain && (resolvedNftUri.includes('data:application/json;base64,') || resolvedNftUri.startsWith('{'))) {\n        var encodedJson = isEncoded ? atob(resolvedNftUri.replace('data:application/json;base64,', '')) : resolvedNftUri;\n        var decoded = JSON.parse(encodedJson);\n        return (0, utils_js_1.parseAvatarUri)({\n          uri: (0, utils_js_1.getJsonImage)(decoded),\n          gatewayUrls\n        });\n      }\n      var uriTokenId = nft.tokenID;\n      if (nft.namespace === 'erc1155') uriTokenId = uriTokenId.replace('0x', '').padStart(64, '0');\n      return (0, utils_js_1.getMetadataAvatarUri)({\n        gatewayUrls,\n        uri: resolvedNftUri.replace(/(?:0x)?{id}/, uriTokenId)\n      });\n    });\n    return _parseNftAvatarUri.apply(this, arguments);\n  }\n});","lineCount":63,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_asyncToGenerator"],[4,23,1,13],[4,26,1,13,"require"],[4,33,1,13],[4,34,1,13,"_dependencyMap"],[4,48,1,13],[5,2,2,0,"Object"],[5,8,2,6],[5,9,2,7,"defineProperty"],[5,23,2,21],[5,24,2,22,"exports"],[5,31,2,29],[5,33,2,31],[5,45,2,43],[5,47,2,45],[6,4,2,47,"value"],[6,9,2,52],[6,11,2,54],[7,2,2,59],[7,3,2,60],[7,4,2,61],[8,2,3,0,"exports"],[8,9,3,7],[8,10,3,8,"parseAvatarRecord"],[8,27,3,25],[8,30,3,28,"parseAvatarRecord"],[8,47,3,45],[9,2,4,0],[9,6,4,6,"utils_js_1"],[9,16,4,16],[9,19,4,19,"require"],[9,26,4,26],[9,27,4,26,"_dependencyMap"],[9,41,4,26],[9,58,4,39],[9,59,4,40],[10,2,4,41],[10,11,5,15,"parseAvatarRecord"],[10,28,5,32,"parseAvatarRecord"],[10,29,5,32,"_x"],[10,31,5,32],[10,33,5,32,"_x2"],[10,36,5,32],[11,4,5,32],[11,11,5,32,"_parseAvatarRecord"],[11,29,5,32],[11,30,5,32,"apply"],[11,35,5,32],[11,42,5,32,"arguments"],[11,51,5,32],[12,2,5,32],[13,2,5,32],[13,11,5,32,"_parseAvatarRecord"],[13,30,5,32],[14,4,5,32,"_parseAvatarRecord"],[14,22,5,32],[14,25,5,32,"_asyncToGenerator"],[14,42,5,32],[14,43,5,0],[14,54,5,33,"client"],[14,60,5,39],[14,62,5,39,"_ref"],[14,66,5,39],[14,68,5,67],[15,6,5,67],[15,10,5,43,"gatewayUrls"],[15,21,5,54],[15,24,5,54,"_ref"],[15,28,5,54],[15,29,5,43,"gatewayUrls"],[15,40,5,54],[16,8,5,56,"record"],[16,14,5,62],[16,17,5,62,"_ref"],[16,21,5,62],[16,22,5,56,"record"],[16,28,5,62],[17,6,6,4],[17,10,6,8],[17,20,6,18],[17,21,6,19,"test"],[17,25,6,23],[17,26,6,24,"record"],[17,32,6,30],[17,33,6,31],[17,35,7,8],[17,42,7,15,"parseNftAvatarUri"],[17,59,7,32],[17,60,7,33,"client"],[17,66,7,39],[17,68,7,41],[18,8,7,43,"gatewayUrls"],[18,19,7,54],[19,8,7,56,"record"],[20,6,7,63],[20,7,7,64],[20,8,7,65],[21,6,8,4],[21,13,8,11],[21,14,8,12],[21,15,8,13],[21,17,8,15,"utils_js_1"],[21,27,8,25],[21,28,8,26,"parseAvatarUri"],[21,42,8,40],[21,44,8,42],[22,8,8,44,"uri"],[22,11,8,47],[22,13,8,49,"record"],[22,19,8,55],[23,8,8,57,"gatewayUrls"],[24,6,8,69],[24,7,8,70],[24,8,8,71],[25,4,9,0],[25,5,9,1],[26,4,9,1],[26,11,9,1,"_parseAvatarRecord"],[26,29,9,1],[26,30,9,1,"apply"],[26,35,9,1],[26,42,9,1,"arguments"],[26,51,9,1],[27,2,9,1],[28,2,9,1],[28,11,10,15,"parseNftAvatarUri"],[28,28,10,32,"parseNftAvatarUri"],[28,29,10,32,"_x3"],[28,32,10,32],[28,34,10,32,"_x4"],[28,37,10,32],[29,4,10,32],[29,11,10,32,"_parseNftAvatarUri"],[29,29,10,32],[29,30,10,32,"apply"],[29,35,10,32],[29,42,10,32,"arguments"],[29,51,10,32],[30,2,10,32],[31,2,10,32],[31,11,10,32,"_parseNftAvatarUri"],[31,30,10,32],[32,4,10,32,"_parseNftAvatarUri"],[32,22,10,32],[32,25,10,32,"_asyncToGenerator"],[32,42,10,32],[32,43,10,0],[32,54,10,33,"client"],[32,60,10,39],[32,62,10,39,"_ref2"],[32,67,10,39],[32,69,10,67],[33,6,10,67],[33,10,10,43,"gatewayUrls"],[33,21,10,54],[33,24,10,54,"_ref2"],[33,29,10,54],[33,30,10,43,"gatewayUrls"],[33,41,10,54],[34,8,10,56,"record"],[34,14,10,62],[34,17,10,62,"_ref2"],[34,22,10,62],[34,23,10,56,"record"],[34,29,10,62],[35,6,11,4],[35,10,11,10,"nft"],[35,13,11,13],[35,16,11,16],[35,17,11,17],[35,18,11,18],[35,20,11,20,"utils_js_1"],[35,30,11,30],[35,31,11,31,"parseNftUri"],[35,42,11,42],[35,44,11,44,"record"],[35,50,11,50],[35,51,11,51],[36,6,12,4],[36,10,12,10,"nftUri"],[36,16,12,16],[36,25,12,25],[36,26,12,26],[36,27,12,27],[36,29,12,29,"utils_js_1"],[36,39,12,39],[36,40,12,40,"getNftTokenUri"],[36,54,12,54],[36,56,12,56,"client"],[36,62,12,62],[36,64,12,64],[37,8,12,66,"nft"],[38,6,12,70],[38,7,12,71],[38,8,12,72],[39,6,13,4],[39,10,13,4,"_ref3"],[39,15,13,4],[39,18,13,59],[39,19,13,60],[39,20,13,61],[39,22,13,63,"utils_js_1"],[39,32,13,73],[39,33,13,74,"resolveAvatarUri"],[39,49,13,90],[39,51,13,92],[40,10,13,94,"uri"],[40,13,13,97],[40,15,13,99,"nftUri"],[40,21,13,105],[41,10,13,107,"gatewayUrls"],[42,8,13,119],[42,9,13,120],[42,10,13,121],[43,8,13,17,"resolvedNftUri"],[43,22,13,31],[43,25,13,31,"_ref3"],[43,30,13,31],[43,31,13,12,"uri"],[43,34,13,15],[44,8,13,33,"isOnChain"],[44,17,13,42],[44,20,13,42,"_ref3"],[44,25,13,42],[44,26,13,33,"isOnChain"],[44,35,13,42],[45,8,13,44,"isEncoded"],[45,17,13,53],[45,20,13,53,"_ref3"],[45,25,13,53],[45,26,13,44,"isEncoded"],[45,35,13,53],[46,6,14,4],[46,10,14,8,"isOnChain"],[46,19,14,17],[46,24,15,9,"resolvedNftUri"],[46,38,15,23],[46,39,15,24,"includes"],[46,47,15,32],[46,48,15,33],[46,79,15,64],[46,80,15,65],[46,84,16,12,"resolvedNftUri"],[46,98,16,26],[46,99,16,27,"startsWith"],[46,109,16,37],[46,110,16,38],[46,113,16,41],[46,114,16,42],[46,115,16,43],[46,117,16,45],[47,8,17,8],[47,12,17,14,"encodedJson"],[47,23,17,25],[47,26,17,28,"isEncoded"],[47,35,17,37],[47,38,19,16,"atob"],[47,42,19,20],[47,43,19,21,"resolvedNftUri"],[47,57,19,35],[47,58,19,36,"replace"],[47,65,19,43],[47,66,19,44],[47,97,19,75],[47,99,19,77],[47,101,19,79],[47,102,19,80],[47,103,19,81],[47,106,21,16,"resolvedNftUri"],[47,120,21,30],[48,8,22,8],[48,12,22,14,"decoded"],[48,19,22,21],[48,22,22,24,"JSON"],[48,26,22,28],[48,27,22,29,"parse"],[48,32,22,34],[48,33,22,35,"encodedJson"],[48,44,22,46],[48,45,22,47],[49,8,23,8],[49,15,23,15],[49,16,23,16],[49,17,23,17],[49,19,23,19,"utils_js_1"],[49,29,23,29],[49,30,23,30,"parseAvatarUri"],[49,44,23,44],[49,46,23,46],[50,10,23,48,"uri"],[50,13,23,51],[50,15,23,53],[50,16,23,54],[50,17,23,55],[50,19,23,57,"utils_js_1"],[50,29,23,67],[50,30,23,68,"getJsonImage"],[50,42,23,80],[50,44,23,82,"decoded"],[50,51,23,89],[50,52,23,90],[51,10,23,92,"gatewayUrls"],[52,8,23,104],[52,9,23,105],[52,10,23,106],[53,6,24,4],[54,6,25,4],[54,10,25,8,"uriTokenId"],[54,20,25,18],[54,23,25,21,"nft"],[54,26,25,24],[54,27,25,25,"tokenID"],[54,34,25,32],[55,6,26,4],[55,10,26,8,"nft"],[55,13,26,11],[55,14,26,12,"namespace"],[55,23,26,21],[55,28,26,26],[55,37,26,35],[55,39,27,8,"uriTokenId"],[55,49,27,18],[55,52,27,21,"uriTokenId"],[55,62,27,31],[55,63,27,32,"replace"],[55,70,27,39],[55,71,27,40],[55,75,27,44],[55,77,27,46],[55,79,27,48],[55,80,27,49],[55,81,27,50,"padStart"],[55,89,27,58],[55,90,27,59],[55,92,27,61],[55,94,27,63],[55,97,27,66],[55,98,27,67],[56,6,28,4],[56,13,28,11],[56,14,28,12],[56,15,28,13],[56,17,28,15,"utils_js_1"],[56,27,28,25],[56,28,28,26,"getMetadataAvatarUri"],[56,48,28,46],[56,50,28,48],[57,8,29,8,"gatewayUrls"],[57,19,29,19],[58,8,30,8,"uri"],[58,11,30,11],[58,13,30,13,"resolvedNftUri"],[58,27,30,27],[58,28,30,28,"replace"],[58,35,30,35],[58,36,30,36],[58,49,30,49],[58,51,30,51,"uriTokenId"],[58,61,30,61],[59,6,31,4],[59,7,31,5],[59,8,31,6],[60,4,32,0],[60,5,32,1],[61,4,32,1],[61,11,32,1,"_parseNftAvatarUri"],[61,29,32,1],[61,30,32,1,"apply"],[61,35,32,1],[61,42,32,1,"arguments"],[61,51,32,1],[62,2,32,1],[63,0,32,1],[63,3]],"functionMap":{"names":["<global>","parseAvatarRecord","parseNftAvatarUri"],"mappings":"AAA;ACI;CDI;AEC;CFsB"}},"type":"js/module"}]}