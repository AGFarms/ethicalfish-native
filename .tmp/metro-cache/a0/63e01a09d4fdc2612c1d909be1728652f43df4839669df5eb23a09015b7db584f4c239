{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":26,"column":32,"index":824}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"./wait.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":18,"index":116},"end":{"line":4,"column":38,"index":136}}],"key":"MMPkMNedH9wAaSyBswcIuY8MTpc="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _asyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.poll = poll;\n  var wait_js_1 = require(_dependencyMap[1], \"./wait.js\");\n  function poll(fn, _ref) {\n    var emitOnBegin = _ref.emitOnBegin,\n      initialWaitTime = _ref.initialWaitTime,\n      interval = _ref.interval;\n    var active = true;\n    var unwatch = () => active = false;\n    var watch = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var data = undefined;\n        if (emitOnBegin) data = yield fn({\n          unpoll: unwatch\n        });\n        var initialWait = (yield initialWaitTime?.(data)) ?? interval;\n        yield (0, wait_js_1.wait)(initialWait);\n        var _poll = /*#__PURE__*/function () {\n          var _ref3 = _asyncToGenerator(function* () {\n            if (!active) return;\n            yield fn({\n              unpoll: unwatch\n            });\n            yield (0, wait_js_1.wait)(interval);\n            _poll();\n          });\n          return function poll() {\n            return _ref3.apply(this, arguments);\n          };\n        }();\n        _poll();\n      });\n      return function watch() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    watch();\n    return unwatch;\n  }\n});","lineCount":46,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_asyncToGenerator"],[4,23,1,13],[4,26,1,13,"require"],[4,33,1,13],[4,34,1,13,"_dependencyMap"],[4,48,1,13],[5,2,2,0,"Object"],[5,8,2,6],[5,9,2,7,"defineProperty"],[5,23,2,21],[5,24,2,22,"exports"],[5,31,2,29],[5,33,2,31],[5,45,2,43],[5,47,2,45],[6,4,2,47,"value"],[6,9,2,52],[6,11,2,54],[7,2,2,59],[7,3,2,60],[7,4,2,61],[8,2,3,0,"exports"],[8,9,3,7],[8,10,3,8,"poll"],[8,14,3,12],[8,17,3,15,"poll"],[8,21,3,19],[9,2,4,0],[9,6,4,6,"wait_js_1"],[9,15,4,15],[9,18,4,18,"require"],[9,25,4,25],[9,26,4,25,"_dependencyMap"],[9,40,4,25],[9,56,4,37],[9,57,4,38],[10,2,5,0],[10,11,5,9,"poll"],[10,15,5,13,"poll"],[10,16,5,14,"fn"],[10,18,5,16],[10,20,5,16,"_ref"],[10,24,5,16],[10,26,5,62],[11,4,5,62],[11,8,5,20,"emitOnBegin"],[11,19,5,31],[11,22,5,31,"_ref"],[11,26,5,31],[11,27,5,20,"emitOnBegin"],[11,38,5,31],[12,6,5,33,"initialWaitTime"],[12,21,5,48],[12,24,5,48,"_ref"],[12,28,5,48],[12,29,5,33,"initialWaitTime"],[12,44,5,48],[13,6,5,50,"interval"],[13,14,5,58],[13,17,5,58,"_ref"],[13,21,5,58],[13,22,5,50,"interval"],[13,30,5,58],[14,4,6,4],[14,8,6,8,"active"],[14,14,6,14],[14,17,6,17],[14,21,6,21],[15,4,7,4],[15,8,7,10,"unwatch"],[15,15,7,17],[15,18,7,20,"unwatch"],[15,19,7,20],[15,24,7,27,"active"],[15,30,7,33],[15,33,7,36],[15,38,7,42],[16,4,8,4],[16,8,8,10,"watch"],[16,13,8,15],[17,6,8,15],[17,10,8,15,"_ref2"],[17,15,8,15],[17,18,8,15,"_asyncToGenerator"],[17,35,8,15],[17,36,8,18],[17,49,8,30],[18,8,9,8],[18,12,9,12,"data"],[18,16,9,16],[18,19,9,19,"undefined"],[18,28,9,28],[19,8,10,8],[19,12,10,12,"emitOnBegin"],[19,23,10,23],[19,25,11,12,"data"],[19,29,11,16],[19,38,11,25,"fn"],[19,40,11,27],[19,41,11,28],[20,10,11,30,"unpoll"],[20,16,11,36],[20,18,11,38,"unwatch"],[21,8,11,46],[21,9,11,47],[21,10,11,48],[22,8,12,8],[22,12,12,14,"initialWait"],[22,23,12,25],[22,26,12,28],[22,33,12,35,"initialWaitTime"],[22,48,12,50],[22,51,12,53,"data"],[22,55,12,57],[22,56,12,58],[22,61,12,63,"interval"],[22,69,12,71],[23,8,13,8],[23,14,13,14],[23,15,13,15],[23,16,13,16],[23,18,13,18,"wait_js_1"],[23,27,13,27],[23,28,13,28,"wait"],[23,32,13,32],[23,34,13,34,"initialWait"],[23,45,13,45],[23,46,13,46],[24,8,14,8],[24,12,14,14,"poll"],[24,17,14,18],[25,10,14,18],[25,14,14,18,"_ref3"],[25,19,14,18],[25,22,14,18,"_asyncToGenerator"],[25,39,14,18],[25,40,14,21],[25,53,14,33],[26,12,15,12],[26,16,15,16],[26,17,15,17,"active"],[26,23,15,23],[26,25,16,16],[27,12,17,12],[27,18,17,18,"fn"],[27,20,17,20],[27,21,17,21],[28,14,17,23,"unpoll"],[28,20,17,29],[28,22,17,31,"unwatch"],[29,12,17,39],[29,13,17,40],[29,14,17,41],[30,12,18,12],[30,18,18,18],[30,19,18,19],[30,20,18,20],[30,22,18,22,"wait_js_1"],[30,31,18,31],[30,32,18,32,"wait"],[30,36,18,36],[30,38,18,38,"interval"],[30,46,18,46],[30,47,18,47],[31,12,19,12,"poll"],[31,17,19,16],[31,18,19,17],[31,19,19,18],[32,10,20,8],[32,11,20,9],[33,10,20,9],[33,26,14,14,"poll"],[33,30,14,18,"poll"],[33,31,14,18],[34,12,14,18],[34,19,14,18,"_ref3"],[34,24,14,18],[34,25,14,18,"apply"],[34,30,14,18],[34,37,14,18,"arguments"],[34,46,14,18],[35,10,14,18],[36,8,14,18],[36,11,20,9],[37,8,21,8,"poll"],[37,13,21,12],[37,14,21,13],[37,15,21,14],[38,6,22,4],[38,7,22,5],[39,6,22,5],[39,22,8,10,"watch"],[39,27,8,15,"watch"],[39,28,8,15],[40,8,8,15],[40,15,8,15,"_ref2"],[40,20,8,15],[40,21,8,15,"apply"],[40,26,8,15],[40,33,8,15,"arguments"],[40,42,8,15],[41,6,8,15],[42,4,8,15],[42,7,22,5],[43,4,23,4,"watch"],[43,9,23,9],[43,10,23,10],[43,11,23,11],[44,4,24,4],[44,11,24,11,"unwatch"],[44,18,24,18],[45,2,25,0],[46,0,25,1],[46,3]],"functionMap":{"names":["<global>","poll","unwatch","watch"],"mappings":"AAA;ACI;oBCE,sBD;kBEC;qBFM;SEM;KFE;CDG"}},"type":"js/module"}]}