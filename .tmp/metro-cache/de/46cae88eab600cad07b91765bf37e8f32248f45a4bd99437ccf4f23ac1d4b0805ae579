{"dependencies":[{"name":"../lru.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":5,"column":17,"index":158},"end":{"line":5,"column":37,"index":178}}],"key":"xmN8d1NIZNnJo4v6K8wlNuy6gZE="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.promiseCache = void 0;\n  exports.withDedupe = withDedupe;\n  var lru_js_1 = require(_dependencyMap[0], \"../lru.js\");\n  exports.promiseCache = new lru_js_1.LruMap(8192);\n  function withDedupe(fn, _ref) {\n    var _ref$enabled = _ref.enabled,\n      enabled = _ref$enabled === void 0 ? true : _ref$enabled,\n      id = _ref.id;\n    if (!enabled || !id) return fn();\n    if (exports.promiseCache.get(id)) return exports.promiseCache.get(id);\n    var promise = fn().finally(() => exports.promiseCache.delete(id));\n    exports.promiseCache.set(id, promise);\n    return promise;\n  }\n});","lineCount":21,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"promiseCache"],[7,22,3,20],[7,25,3,23],[7,30,3,28],[7,31,3,29],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"withDedupe"],[8,20,4,18],[8,23,4,21,"withDedupe"],[8,33,4,31],[9,2,5,0],[9,6,5,6,"lru_js_1"],[9,14,5,14],[9,17,5,17,"require"],[9,24,5,24],[9,25,5,24,"_dependencyMap"],[9,39,5,24],[9,55,5,36],[9,56,5,37],[10,2,6,0,"exports"],[10,9,6,7],[10,10,6,8,"promiseCache"],[10,22,6,20],[10,25,6,23],[10,29,6,27,"lru_js_1"],[10,37,6,35],[10,38,6,36,"LruMap"],[10,44,6,42],[10,45,6,43],[10,49,6,47],[10,50,6,48],[11,2,7,0],[11,11,7,9,"withDedupe"],[11,21,7,19,"withDedupe"],[11,22,7,20,"fn"],[11,24,7,22],[11,26,7,22,"_ref"],[11,30,7,22],[11,32,7,48],[12,4,7,48],[12,8,7,48,"_ref$enabled"],[12,20,7,48],[12,23,7,48,"_ref"],[12,27,7,48],[12,28,7,26,"enabled"],[12,35,7,33],[13,6,7,26,"enabled"],[13,13,7,33],[13,16,7,33,"_ref$enabled"],[13,28,7,33],[13,42,7,36],[13,46,7,40],[13,49,7,40,"_ref$enabled"],[13,61,7,40],[14,6,7,42,"id"],[14,8,7,44],[14,11,7,44,"_ref"],[14,15,7,44],[14,16,7,42,"id"],[14,18,7,44],[15,4,8,4],[15,8,8,8],[15,9,8,9,"enabled"],[15,16,8,16],[15,20,8,20],[15,21,8,21,"id"],[15,23,8,23],[15,25,9,8],[15,32,9,15,"fn"],[15,34,9,17],[15,35,9,18],[15,36,9,19],[16,4,10,4],[16,8,10,8,"exports"],[16,15,10,15],[16,16,10,16,"promiseCache"],[16,28,10,28],[16,29,10,29,"get"],[16,32,10,32],[16,33,10,33,"id"],[16,35,10,35],[16,36,10,36],[16,38,11,8],[16,45,11,15,"exports"],[16,52,11,22],[16,53,11,23,"promiseCache"],[16,65,11,35],[16,66,11,36,"get"],[16,69,11,39],[16,70,11,40,"id"],[16,72,11,42],[16,73,11,43],[17,4,12,4],[17,8,12,10,"promise"],[17,15,12,17],[17,18,12,20,"fn"],[17,20,12,22],[17,21,12,23],[17,22,12,24],[17,23,12,25,"finally"],[17,30,12,32],[17,31,12,33],[17,37,12,39,"exports"],[17,44,12,46],[17,45,12,47,"promiseCache"],[17,57,12,59],[17,58,12,60,"delete"],[17,64,12,66],[17,65,12,67,"id"],[17,67,12,69],[17,68,12,70],[17,69,12,71],[18,4,13,4,"exports"],[18,11,13,11],[18,12,13,12,"promiseCache"],[18,24,13,24],[18,25,13,25,"set"],[18,28,13,28],[18,29,13,29,"id"],[18,31,13,31],[18,33,13,33,"promise"],[18,40,13,40],[18,41,13,41],[19,4,14,4],[19,11,14,11,"promise"],[19,18,14,18],[20,2,15,0],[21,0,15,1],[21,3]],"functionMap":{"names":["<global>","withDedupe","fn._finally$argument_0"],"mappings":"AAA;ACM;iCCK,qCD;CDG"}},"type":"js/module"}]}