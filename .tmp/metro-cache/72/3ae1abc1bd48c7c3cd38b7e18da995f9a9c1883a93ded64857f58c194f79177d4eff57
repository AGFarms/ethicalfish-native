{"dependencies":[{"name":"react","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":8,"column":36,"index":203},"end":{"line":8,"column":52,"index":219}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":9,"column":32,"index":254},"end":{"line":9,"column":72,"index":294}}],"key":"wXMcIJWUD66R6uBdlKglbjBdJPs="}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":10,"column":30,"index":326},"end":{"line":10,"column":68,"index":364}}],"key":"jk0qVIUl5f0mZv0RFSM44Eb40Bo="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var React = _interopRequireWildcard(require(_dependencyMap[0], \"react\"));\n  var _NavigationBuilderContext = require(_dependencyMap[1], \"./NavigationBuilderContext.js\");\n  var _NavigationRouteContext = require(_dependencyMap[2], \"./NavigationRouteContext.js\");\n  function _getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(),\n      t = new WeakMap();\n    return (_getRequireWildcardCache = function (e) {\n      return e ? t : r;\n    })(e);\n  }\n  function _interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != typeof e && \"function\" != typeof e) return {\n      default: e\n    };\n    var t = _getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n      },\n      a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) {\n      var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n      i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n.default = e, t && t.set(e, n), n;\n  }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) => {\n    var nextRouteKeys = nextRoutes.map(route => route.key);\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(route => !nextRouteKeys.includes(route.key)).reverse();\n    var visitedRouteKeys =\n    // @ts-expect-error: add this property to mark that we've already emitted this action\n    action[VISITED_ROUTE_KEYS] ?? new Set();\n    var beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (var route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.NavigationRouteContext);\n    var routeKey = route?.key;\n    React.useEffect(() => {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, action => {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":94,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"shouldPreventRemove"],[7,29,6,27],[7,32,6,30],[7,37,6,35],[7,38,6,36],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"useOnPreventRemove"],[8,28,7,26],[8,31,7,29,"useOnPreventRemove"],[8,49,7,47],[9,2,8,0],[9,6,8,4,"React"],[9,11,8,9],[9,14,8,12,"_interopRequireWildcard"],[9,37,8,35],[9,38,8,36,"require"],[9,45,8,43],[9,46,8,43,"_dependencyMap"],[9,60,8,43],[9,72,8,51],[9,73,8,52],[9,74,8,53],[10,2,9,0],[10,6,9,4,"_NavigationBuilderContext"],[10,31,9,29],[10,34,9,32,"require"],[10,41,9,39],[10,42,9,39,"_dependencyMap"],[10,56,9,39],[10,92,9,71],[10,93,9,72],[11,2,10,0],[11,6,10,4,"_NavigationRouteContext"],[11,29,10,27],[11,32,10,30,"require"],[11,39,10,37],[11,40,10,37,"_dependencyMap"],[11,54,10,37],[11,88,10,67],[11,89,10,68],[12,2,11,0],[12,11,11,9,"_getRequireWildcardCache"],[12,35,11,33,"_getRequireWildcardCache"],[12,36,11,34,"e"],[12,37,11,35],[12,39,11,37],[13,4,11,39],[13,8,11,43],[13,18,11,53],[13,22,11,57],[13,29,11,64,"WeakMap"],[13,36,11,71],[13,38,11,73],[13,45,11,80],[13,49,11,84],[14,4,11,86],[14,8,11,90,"r"],[14,9,11,91],[14,12,11,94],[14,16,11,98,"WeakMap"],[14,23,11,105],[14,24,11,106],[14,25,11,107],[15,6,11,109,"t"],[15,7,11,110],[15,10,11,113],[15,14,11,117,"WeakMap"],[15,21,11,124],[15,22,11,125],[15,23,11,126],[16,4,11,128],[16,11,11,135],[16,12,11,136,"_getRequireWildcardCache"],[16,36,11,160],[16,39,11,163],[16,48,11,163,"_getRequireWildcardCache"],[16,49,11,173,"e"],[16,50,11,174],[16,52,11,176],[17,6,11,178],[17,13,11,185,"e"],[17,14,11,186],[17,17,11,189,"t"],[17,18,11,190],[17,21,11,193,"r"],[17,22,11,194],[18,4,11,196],[18,5,11,197],[18,7,11,199,"e"],[18,8,11,200],[18,9,11,201],[19,2,11,203],[20,2,12,0],[20,11,12,9,"_interopRequireWildcard"],[20,34,12,32,"_interopRequireWildcard"],[20,35,12,33,"e"],[20,36,12,34],[20,38,12,36,"r"],[20,39,12,37],[20,41,12,39],[21,4,12,41],[21,8,12,45],[21,9,12,46,"r"],[21,10,12,47],[21,14,12,51,"e"],[21,15,12,52],[21,19,12,56,"e"],[21,20,12,57],[21,21,12,58,"__esModule"],[21,31,12,68],[21,33,12,70],[21,40,12,77,"e"],[21,41,12,78],[22,4,12,80],[22,8,12,84],[22,12,12,88],[22,17,12,93,"e"],[22,18,12,94],[22,22,12,98],[22,30,12,106],[22,34,12,110],[22,41,12,117,"e"],[22,42,12,118],[22,46,12,122],[22,56,12,132],[22,60,12,136],[22,67,12,143,"e"],[22,68,12,144],[22,70,12,146],[22,77,12,153],[23,6,12,155,"default"],[23,13,12,162],[23,15,12,164,"e"],[24,4,12,166],[24,5,12,167],[25,4,12,169],[25,8,12,173,"t"],[25,9,12,174],[25,12,12,177,"_getRequireWildcardCache"],[25,36,12,201],[25,37,12,202,"r"],[25,38,12,203],[25,39,12,204],[26,4,12,206],[26,8,12,210,"t"],[26,9,12,211],[26,13,12,215,"t"],[26,14,12,216],[26,15,12,217,"has"],[26,18,12,220],[26,19,12,221,"e"],[26,20,12,222],[26,21,12,223],[26,23,12,225],[26,30,12,232,"t"],[26,31,12,233],[26,32,12,234,"get"],[26,35,12,237],[26,36,12,238,"e"],[26,37,12,239],[26,38,12,240],[27,4,12,242],[27,8,12,246,"n"],[27,9,12,247],[27,12,12,250],[28,8,12,252,"__proto__"],[28,17,12,261],[28,19,12,263],[29,6,12,268],[29,7,12,269],[30,6,12,271,"a"],[30,7,12,272],[30,10,12,275,"Object"],[30,16,12,281],[30,17,12,282,"defineProperty"],[30,31,12,296],[30,35,12,300,"Object"],[30,41,12,306],[30,42,12,307,"getOwnPropertyDescriptor"],[30,66,12,331],[31,4,12,333],[31,9,12,338],[31,13,12,342,"u"],[31,14,12,343],[31,18,12,347,"e"],[31,19,12,348],[31,21,12,350],[31,25,12,354],[31,34,12,363],[31,39,12,368,"u"],[31,40,12,369],[31,44,12,373],[31,45,12,374],[31,46,12,375],[31,47,12,376,"hasOwnProperty"],[31,61,12,390],[31,62,12,391,"call"],[31,66,12,395],[31,67,12,396,"e"],[31,68,12,397],[31,70,12,399,"u"],[31,71,12,400],[31,72,12,401],[31,74,12,403],[32,6,12,405],[32,10,12,409,"i"],[32,11,12,410],[32,14,12,413,"a"],[32,15,12,414],[32,18,12,417,"Object"],[32,24,12,423],[32,25,12,424,"getOwnPropertyDescriptor"],[32,49,12,448],[32,50,12,449,"e"],[32,51,12,450],[32,53,12,452,"u"],[32,54,12,453],[32,55,12,454],[32,58,12,457],[32,62,12,461],[33,6,12,463,"i"],[33,7,12,464],[33,12,12,469,"i"],[33,13,12,470],[33,14,12,471,"get"],[33,17,12,474],[33,21,12,478,"i"],[33,22,12,479],[33,23,12,480,"set"],[33,26,12,483],[33,27,12,484],[33,30,12,487,"Object"],[33,36,12,493],[33,37,12,494,"defineProperty"],[33,51,12,508],[33,52,12,509,"n"],[33,53,12,510],[33,55,12,512,"u"],[33,56,12,513],[33,58,12,515,"i"],[33,59,12,516],[33,60,12,517],[33,63,12,520,"n"],[33,64,12,521],[33,65,12,522,"u"],[33,66,12,523],[33,67,12,524],[33,70,12,527,"e"],[33,71,12,528],[33,72,12,529,"u"],[33,73,12,530],[33,74,12,531],[34,4,12,533],[35,4,12,535],[35,11,12,542,"n"],[35,12,12,543],[35,13,12,544,"default"],[35,20,12,551],[35,23,12,554,"e"],[35,24,12,555],[35,26,12,557,"t"],[35,27,12,558],[35,31,12,562,"t"],[35,32,12,563],[35,33,12,564,"set"],[35,36,12,567],[35,37,12,568,"e"],[35,38,12,569],[35,40,12,571,"n"],[35,41,12,572],[35,42,12,573],[35,44,12,575,"n"],[35,45,12,576],[36,2,12,578],[37,2,13,0],[37,6,13,6,"VISITED_ROUTE_KEYS"],[37,24,13,24],[37,27,13,27,"Symbol"],[37,33,13,33],[37,34,13,34],[37,54,13,54],[37,55,13,55],[38,2,14,0],[38,6,14,6,"shouldPreventRemove"],[38,25,14,25],[38,28,14,28,"shouldPreventRemove"],[38,29,14,29,"emitter"],[38,36,14,36],[38,38,14,38,"beforeRemoveListeners"],[38,59,14,59],[38,61,14,61,"currentRoutes"],[38,74,14,74],[38,76,14,76,"nextRoutes"],[38,86,14,86],[38,88,14,88,"action"],[38,94,14,94],[38,99,14,99],[39,4,15,2],[39,8,15,8,"nextRouteKeys"],[39,21,15,21],[39,24,15,24,"nextRoutes"],[39,34,15,34],[39,35,15,35,"map"],[39,38,15,38],[39,39,15,39,"route"],[39,44,15,44],[39,48,15,48,"route"],[39,53,15,53],[39,54,15,54,"key"],[39,57,15,57],[39,58,15,58],[41,4,17,2],[42,4,18,2],[42,8,18,8,"removedRoutes"],[42,21,18,21],[42,24,18,24,"currentRoutes"],[42,37,18,37],[42,38,18,38,"filter"],[42,44,18,44],[42,45,18,45,"route"],[42,50,18,50],[42,54,18,54],[42,55,18,55,"nextRouteKeys"],[42,68,18,68],[42,69,18,69,"includes"],[42,77,18,77],[42,78,18,78,"route"],[42,83,18,83],[42,84,18,84,"key"],[42,87,18,87],[42,88,18,88],[42,89,18,89],[42,90,18,90,"reverse"],[42,97,18,97],[42,98,18,98],[42,99,18,99],[43,4,19,2],[43,8,19,8,"visitedRouteKeys"],[43,24,19,24],[44,4,20,2],[45,4,21,2,"action"],[45,10,21,8],[45,11,21,9,"VISITED_ROUTE_KEYS"],[45,29,21,27],[45,30,21,28],[45,34,21,32],[45,38,21,36,"Set"],[45,41,21,39],[45,42,21,40],[45,43,21,41],[46,4,22,2],[46,8,22,8,"beforeRemoveAction"],[46,26,22,26],[46,29,22,29],[47,6,23,4],[47,9,23,7,"action"],[47,15,23,13],[48,6,24,4],[48,7,24,5,"VISITED_ROUTE_KEYS"],[48,25,24,23],[48,28,24,26,"visitedRouteKeys"],[49,4,25,2],[49,5,25,3],[50,4,26,2],[50,9,26,7],[50,13,26,13,"route"],[50,18,26,18],[50,22,26,22,"removedRoutes"],[50,35,26,35],[50,37,26,37],[51,6,27,4],[51,10,27,8,"visitedRouteKeys"],[51,26,27,24],[51,27,27,25,"has"],[51,30,27,28],[51,31,27,29,"route"],[51,36,27,34],[51,37,27,35,"key"],[51,40,27,38],[51,41,27,39],[51,43,27,41],[52,8,28,6],[53,8,29,6],[54,6,30,4],[56,6,32,4],[57,6,33,4],[57,10,33,10,"isPrevented"],[57,21,33,21],[57,24,33,24,"beforeRemoveListeners"],[57,45,33,45],[57,46,33,46,"route"],[57,51,33,51],[57,52,33,52,"key"],[57,55,33,55],[57,56,33,56],[57,59,33,59,"beforeRemoveAction"],[57,77,33,77],[57,78,33,78],[58,6,34,4],[58,10,34,8,"isPrevented"],[58,21,34,19],[58,23,34,21],[59,8,35,6],[59,15,35,13],[59,19,35,17],[60,6,36,4],[61,6,37,4,"visitedRouteKeys"],[61,22,37,20],[61,23,37,21,"add"],[61,26,37,24],[61,27,37,25,"route"],[61,32,37,30],[61,33,37,31,"key"],[61,36,37,34],[61,37,37,35],[62,6,38,4],[62,10,38,10,"event"],[62,15,38,15],[62,18,38,18,"emitter"],[62,25,38,25],[62,26,38,26,"emit"],[62,30,38,30],[62,31,38,31],[63,8,39,6,"type"],[63,12,39,10],[63,14,39,12],[63,28,39,26],[64,8,40,6,"target"],[64,14,40,12],[64,16,40,14,"route"],[64,21,40,19],[64,22,40,20,"key"],[64,25,40,23],[65,8,41,6,"data"],[65,12,41,10],[65,14,41,12],[66,10,42,8,"action"],[66,16,42,14],[66,18,42,16,"beforeRemoveAction"],[67,8,43,6],[67,9,43,7],[68,8,44,6,"canPreventDefault"],[68,25,44,23],[68,27,44,25],[69,6,45,4],[69,7,45,5],[69,8,45,6],[70,6,46,4],[70,10,46,8,"event"],[70,15,46,13],[70,16,46,14,"defaultPrevented"],[70,32,46,30],[70,34,46,32],[71,8,47,6],[71,15,47,13],[71,19,47,17],[72,6,48,4],[73,4,49,2],[74,4,50,2],[74,11,50,9],[74,16,50,14],[75,2,51,0],[75,3,51,1],[76,2,52,0,"exports"],[76,9,52,7],[76,10,52,8,"shouldPreventRemove"],[76,29,52,27],[76,32,52,30,"shouldPreventRemove"],[76,51,52,49],[77,2,53,0],[77,11,53,9,"useOnPreventRemove"],[77,29,53,27,"useOnPreventRemove"],[77,30,53,27,"_ref"],[77,34,53,27],[77,36,57,3],[78,4,57,3],[78,8,54,2,"getState"],[78,16,54,10],[78,19,54,10,"_ref"],[78,23,54,10],[78,24,54,2,"getState"],[78,32,54,10],[79,6,55,2,"emitter"],[79,13,55,9],[79,16,55,9,"_ref"],[79,20,55,9],[79,21,55,2,"emitter"],[79,28,55,9],[80,6,56,2,"beforeRemoveListeners"],[80,27,56,23],[80,30,56,23,"_ref"],[80,34,56,23],[80,35,56,2,"beforeRemoveListeners"],[80,56,56,23],[81,4,58,2],[81,8,58,2,"_React$useContext"],[81,25,58,2],[81,28,60,6,"React"],[81,33,60,11],[81,34,60,12,"useContext"],[81,44,60,22],[81,45,60,23,"_NavigationBuilderContext"],[81,70,60,48],[81,71,60,49,"NavigationBuilderContext"],[81,95,60,73],[81,96,60,74],[82,6,59,4,"addKeyedListener"],[82,22,59,20],[82,25,59,20,"_React$useContext"],[82,42,59,20],[82,43,59,4,"addKeyedListener"],[82,59,59,20],[83,4,61,2],[83,8,61,8,"route"],[83,13,61,13],[83,16,61,16,"React"],[83,21,61,21],[83,22,61,22,"useContext"],[83,32,61,32],[83,33,61,33,"_NavigationRouteContext"],[83,56,61,56],[83,57,61,57,"NavigationRouteContext"],[83,79,61,79],[83,80,61,80],[84,4,62,2],[84,8,62,8,"routeKey"],[84,16,62,16],[84,19,62,19,"route"],[84,24,62,24],[84,26,62,26,"key"],[84,29,62,29],[85,4,63,2,"React"],[85,9,63,7],[85,10,63,8,"useEffect"],[85,19,63,17],[85,20,63,18],[85,26,63,24],[86,6,64,4],[86,10,64,8,"routeKey"],[86,18,64,16],[86,20,64,18],[87,8,65,6],[87,15,65,13,"addKeyedListener"],[87,31,65,29],[87,34,65,32],[87,48,65,46],[87,50,65,48,"routeKey"],[87,58,65,56],[87,60,65,58,"action"],[87,66,65,64],[87,70,65,68],[88,10,66,8],[88,14,66,14,"state"],[88,19,66,19],[88,22,66,22,"getState"],[88,30,66,30],[88,31,66,31],[88,32,66,32],[89,10,67,8],[89,17,67,15,"shouldPreventRemove"],[89,36,67,34],[89,37,67,35,"emitter"],[89,44,67,42],[89,46,67,44,"beforeRemoveListeners"],[89,67,67,65],[89,69,67,67,"state"],[89,74,67,72],[89,75,67,73,"routes"],[89,81,67,79],[89,83,67,81],[89,85,67,83],[89,87,67,85,"action"],[89,93,67,91],[89,94,67,92],[90,8,68,6],[90,9,68,7],[90,10,68,8],[91,6,69,4],[92,4,70,2],[92,5,70,3],[92,7,70,5],[92,8,70,6,"addKeyedListener"],[92,24,70,22],[92,26,70,24,"beforeRemoveListeners"],[92,47,70,45],[92,49,70,47,"emitter"],[92,56,70,54],[92,58,70,56,"getState"],[92,66,70,64],[92,68,70,66,"routeKey"],[92,76,70,74],[92,77,70,75],[92,78,70,76],[93,2,71,0],[94,0,71,1],[94,3]],"functionMap":{"names":["<global>","_getRequireWildcardCache","_interopRequireWildcard","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;ACU,4MD;AEC,mkBF;4BGE;uCCC,kBD;6CEG,2CF;CHiC;AME;kBCU;0DCE;ODG;GDE;CNC"}},"type":"js/module"}]}