{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.cleanupCache = exports.listenersCache = void 0;\n  exports.observe = observe;\n  exports.listenersCache = new Map();\n  exports.cleanupCache = new Map();\n  var callbackCount = 0;\n  function observe(observerId, callbacks, fn) {\n    var callbackId = ++callbackCount;\n    var getListeners = () => exports.listenersCache.get(observerId) || [];\n    var unsubscribe = () => {\n      var listeners = getListeners();\n      exports.listenersCache.set(observerId, listeners.filter(cb => cb.id !== callbackId));\n    };\n    var unwatch = () => {\n      var listeners = getListeners();\n      if (!listeners.some(cb => cb.id === callbackId)) return;\n      var cleanup = exports.cleanupCache.get(observerId);\n      if (listeners.length === 1 && cleanup) cleanup();\n      unsubscribe();\n    };\n    var listeners = getListeners();\n    exports.listenersCache.set(observerId, [...listeners, {\n      id: callbackId,\n      fns: callbacks\n    }]);\n    if (listeners && listeners.length > 0) return unwatch;\n    var emit = {};\n    var _loop = function (key) {\n      emit[key] = function () {\n        var listeners = getListeners();\n        if (listeners.length === 0) return;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        for (var listener of listeners) listener.fns[key]?.(...args);\n      };\n    };\n    for (var key in callbacks) {\n      _loop(key);\n    }\n    var cleanup = fn(emit);\n    if (typeof cleanup === 'function') exports.cleanupCache.set(observerId, cleanup);\n    return unwatch;\n  }\n});","lineCount":50,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"cleanupCache"],[7,22,3,20],[7,25,3,23,"exports"],[7,32,3,30],[7,33,3,31,"listenersCache"],[7,47,3,45],[7,50,3,48],[7,55,3,53],[7,56,3,54],[8,2,4,0,"exports"],[8,9,4,7],[8,10,4,8,"observe"],[8,17,4,15],[8,20,4,18,"observe"],[8,27,4,25],[9,2,5,0,"exports"],[9,9,5,7],[9,10,5,8,"listenersCache"],[9,24,5,22],[9,27,5,25],[9,31,5,29,"Map"],[9,34,5,32],[9,35,5,33],[9,36,5,34],[10,2,6,0,"exports"],[10,9,6,7],[10,10,6,8,"cleanupCache"],[10,22,6,20],[10,25,6,23],[10,29,6,27,"Map"],[10,32,6,30],[10,33,6,31],[10,34,6,32],[11,2,7,0],[11,6,7,4,"callbackCount"],[11,19,7,17],[11,22,7,20],[11,23,7,21],[12,2,8,0],[12,11,8,9,"observe"],[12,18,8,16,"observe"],[12,19,8,17,"observerId"],[12,29,8,27],[12,31,8,29,"callbacks"],[12,40,8,38],[12,42,8,40,"fn"],[12,44,8,42],[12,46,8,44],[13,4,9,4],[13,8,9,10,"callbackId"],[13,18,9,20],[13,21,9,23],[13,23,9,25,"callbackCount"],[13,36,9,38],[14,4,10,4],[14,8,10,10,"getListeners"],[14,20,10,22],[14,23,10,25,"getListeners"],[14,24,10,25],[14,29,10,31,"exports"],[14,36,10,38],[14,37,10,39,"listenersCache"],[14,51,10,53],[14,52,10,54,"get"],[14,55,10,57],[14,56,10,58,"observerId"],[14,66,10,68],[14,67,10,69],[14,71,10,73],[14,73,10,75],[15,4,11,4],[15,8,11,10,"unsubscribe"],[15,19,11,21],[15,22,11,24,"unsubscribe"],[15,23,11,24],[15,28,11,30],[16,6,12,8],[16,10,12,14,"listeners"],[16,19,12,23],[16,22,12,26,"getListeners"],[16,34,12,38],[16,35,12,39],[16,36,12,40],[17,6,13,8,"exports"],[17,13,13,15],[17,14,13,16,"listenersCache"],[17,28,13,30],[17,29,13,31,"set"],[17,32,13,34],[17,33,13,35,"observerId"],[17,43,13,45],[17,45,13,47,"listeners"],[17,54,13,56],[17,55,13,57,"filter"],[17,61,13,63],[17,62,13,65,"cb"],[17,64,13,67],[17,68,13,72,"cb"],[17,70,13,74],[17,71,13,75,"id"],[17,73,13,77],[17,78,13,82,"callbackId"],[17,88,13,92],[17,89,13,93],[17,90,13,94],[18,4,14,4],[18,5,14,5],[19,4,15,4],[19,8,15,10,"unwatch"],[19,15,15,17],[19,18,15,20,"unwatch"],[19,19,15,20],[19,24,15,26],[20,6,16,8],[20,10,16,14,"listeners"],[20,19,16,23],[20,22,16,26,"getListeners"],[20,34,16,38],[20,35,16,39],[20,36,16,40],[21,6,17,8],[21,10,17,12],[21,11,17,13,"listeners"],[21,20,17,22],[21,21,17,23,"some"],[21,25,17,27],[21,26,17,29,"cb"],[21,28,17,31],[21,32,17,36,"cb"],[21,34,17,38],[21,35,17,39,"id"],[21,37,17,41],[21,42,17,46,"callbackId"],[21,52,17,56],[21,53,17,57],[21,55,18,12],[22,6,19,8],[22,10,19,14,"cleanup"],[22,17,19,21],[22,20,19,24,"exports"],[22,27,19,31],[22,28,19,32,"cleanupCache"],[22,40,19,44],[22,41,19,45,"get"],[22,44,19,48],[22,45,19,49,"observerId"],[22,55,19,59],[22,56,19,60],[23,6,20,8],[23,10,20,12,"listeners"],[23,19,20,21],[23,20,20,22,"length"],[23,26,20,28],[23,31,20,33],[23,32,20,34],[23,36,20,38,"cleanup"],[23,43,20,45],[23,45,21,12,"cleanup"],[23,52,21,19],[23,53,21,20],[23,54,21,21],[24,6,22,8,"unsubscribe"],[24,17,22,19],[24,18,22,20],[24,19,22,21],[25,4,23,4],[25,5,23,5],[26,4,24,4],[26,8,24,10,"listeners"],[26,17,24,19],[26,20,24,22,"getListeners"],[26,32,24,34],[26,33,24,35],[26,34,24,36],[27,4,25,4,"exports"],[27,11,25,11],[27,12,25,12,"listenersCache"],[27,26,25,26],[27,27,25,27,"set"],[27,30,25,30],[27,31,25,31,"observerId"],[27,41,25,41],[27,43,25,43],[27,44,26,8],[27,47,26,11,"listeners"],[27,56,26,20],[27,58,27,8],[28,6,27,10,"id"],[28,8,27,12],[28,10,27,14,"callbackId"],[28,20,27,24],[29,6,27,26,"fns"],[29,9,27,29],[29,11,27,31,"callbacks"],[30,4,27,41],[30,5,27,42],[30,6,28,5],[30,7,28,6],[31,4,29,4],[31,8,29,8,"listeners"],[31,17,29,17],[31,21,29,21,"listeners"],[31,30,29,30],[31,31,29,31,"length"],[31,37,29,37],[31,40,29,40],[31,41,29,41],[31,43,30,8],[31,50,30,15,"unwatch"],[31,57,30,22],[32,4,31,4],[32,8,31,10,"emit"],[32,12,31,14],[32,15,31,17],[32,16,31,18],[32,17,31,19],[33,4,31,20],[33,8,31,20,"_loop"],[33,13,31,20],[33,25,31,20,"_loop"],[33,26,31,20,"key"],[33,29,31,20],[33,31,32,33],[34,6,33,8,"emit"],[34,10,33,12],[34,11,33,13,"key"],[34,14,33,16],[34,15,33,17],[34,18,33,21],[34,30,33,34],[35,8,34,12],[35,12,34,18,"listeners"],[35,21,34,27],[35,24,34,30,"getListeners"],[35,36,34,42],[35,37,34,43],[35,38,34,44],[36,8,35,12],[36,12,35,16,"listeners"],[36,21,35,25],[36,22,35,26,"length"],[36,28,35,32],[36,33,35,37],[36,34,35,38],[36,36,36,16],[37,8,36,23],[37,17,36,23,"_len"],[37,21,36,23],[37,24,36,23,"arguments"],[37,33,36,23],[37,34,36,23,"length"],[37,40,36,23],[37,42,33,25,"args"],[37,46,33,29],[37,53,33,29,"Array"],[37,58,33,29],[37,59,33,29,"_len"],[37,63,33,29],[37,66,33,29,"_key"],[37,70,33,29],[37,76,33,29,"_key"],[37,80,33,29],[37,83,33,29,"_len"],[37,87,33,29],[37,89,33,29,"_key"],[37,93,33,29],[38,10,33,25,"args"],[38,14,33,29],[38,15,33,29,"_key"],[38,19,33,29],[38,23,33,29,"arguments"],[38,32,33,29],[38,33,33,29,"_key"],[38,37,33,29],[39,8,33,29],[40,8,37,12],[40,13,37,17],[40,17,37,23,"listener"],[40,25,37,31],[40,29,37,35,"listeners"],[40,38,37,44],[40,40,38,16,"listener"],[40,48,38,24],[40,49,38,25,"fns"],[40,52,38,28],[40,53,38,29,"key"],[40,56,38,32],[40,57,38,33],[40,60,38,36],[40,63,38,39,"args"],[40,67,38,43],[40,68,38,44],[41,6,39,8],[41,7,39,10],[42,4,40,4],[42,5,40,5],[43,4,32,4],[43,9,32,9],[43,13,32,15,"key"],[43,16,32,18],[43,20,32,22,"callbacks"],[43,29,32,31],[44,6,32,31,"_loop"],[44,11,32,31],[44,12,32,31,"key"],[44,15,32,31],[45,4,32,31],[46,4,41,4],[46,8,41,10,"cleanup"],[46,15,41,17],[46,18,41,20,"fn"],[46,20,41,22],[46,21,41,23,"emit"],[46,25,41,27],[46,26,41,28],[47,4,42,4],[47,8,42,8],[47,15,42,15,"cleanup"],[47,22,42,22],[47,27,42,27],[47,37,42,37],[47,39,43,8,"exports"],[47,46,43,15],[47,47,43,16,"cleanupCache"],[47,59,43,28],[47,60,43,29,"set"],[47,63,43,32],[47,64,43,33,"observerId"],[47,74,43,43],[47,76,43,45,"cleanup"],[47,83,43,52],[47,84,43,53],[48,4,44,4],[48,11,44,11,"unwatch"],[48,18,44,18],[49,2,45,0],[50,0,45,1],[50,3]],"functionMap":{"names":["<global>","observe","getListeners","unsubscribe","listeners.filter$argument_0","unwatch","listeners.some$argument_0","emit.key"],"mappings":"AAA;ACO;yBCE,kDD;wBEC;gECE,4BD;KFC;oBIC;4BCE,4BD;KJM;qBMU;SNM;CDM"}},"type":"js/module"}]}