{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":67,"column":46,"index":2801}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"../../errors/fee.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":5,"column":17,"index":210},"end":{"line":5,"column":47,"index":240}}],"key":"Q23Bbtr1iQHf1/al1dd5jEGGCwc="}},{"name":"../../utils/getAction.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":6,"column":23,"index":265},"end":{"line":6,"column":58,"index":300}}],"key":"Y/n4m+r52hYXgM0UylfgsDfMHzI="}},{"name":"./estimateMaxPriorityFeePerGas.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":7,"column":42,"index":344},"end":{"line":7,"column":86,"index":388}}],"key":"ZIgN366snm8HV4y5mQXiCyDN3Uw="}},{"name":"./getBlock.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":8,"column":22,"index":412},"end":{"line":8,"column":46,"index":436}}],"key":"mkZbwzwtcwQCllOxtyHW1+E23Fw="}},{"name":"./getGasPrice.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":9,"column":25,"index":463},"end":{"line":9,"column":52,"index":490}}],"key":"7cIKtwjcV1m+/S4JLsQWg4E0JYs="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _asyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.estimateFeesPerGas = estimateFeesPerGas;\n  exports.internal_estimateFeesPerGas = internal_estimateFeesPerGas;\n  var fee_js_1 = require(_dependencyMap[1], \"../../errors/fee.js\");\n  var getAction_js_1 = require(_dependencyMap[2], \"../../utils/getAction.js\");\n  var estimateMaxPriorityFeePerGas_js_1 = require(_dependencyMap[3], \"./estimateMaxPriorityFeePerGas.js\");\n  var getBlock_js_1 = require(_dependencyMap[4], \"./getBlock.js\");\n  var getGasPrice_js_1 = require(_dependencyMap[5], \"./getGasPrice.js\");\n  function estimateFeesPerGas(_x, _x2) {\n    return _estimateFeesPerGas.apply(this, arguments);\n  }\n  function _estimateFeesPerGas() {\n    _estimateFeesPerGas = _asyncToGenerator(function* (client, args) {\n      return internal_estimateFeesPerGas(client, args);\n    });\n    return _estimateFeesPerGas.apply(this, arguments);\n  }\n  function internal_estimateFeesPerGas(_x3, _x4) {\n    return _internal_estimateFeesPerGas.apply(this, arguments);\n  }\n  function _internal_estimateFeesPerGas() {\n    _internal_estimateFeesPerGas = _asyncToGenerator(function* (client, args) {\n      var _ref = args || {},\n        block_ = _ref.block,\n        _ref$chain = _ref.chain,\n        chain = _ref$chain === void 0 ? client.chain : _ref$chain,\n        request = _ref.request,\n        _ref$type = _ref.type,\n        type = _ref$type === void 0 ? 'eip1559' : _ref$type;\n      var baseFeeMultiplier = yield _asyncToGenerator(function* () {\n        if (typeof chain?.fees?.baseFeeMultiplier === 'function') return chain.fees.baseFeeMultiplier({\n          block: block_,\n          client,\n          request\n        });\n        return chain?.fees?.baseFeeMultiplier ?? 1.2;\n      })();\n      if (baseFeeMultiplier < 1) throw new fee_js_1.BaseFeeScalarError();\n      var decimals = baseFeeMultiplier.toString().split('.')[1]?.length ?? 0;\n      var denominator = 10 ** decimals;\n      var multiply = base => base * BigInt(Math.ceil(baseFeeMultiplier * denominator)) / BigInt(denominator);\n      var block = block_ ? block_ : yield (0, getAction_js_1.getAction)(client, getBlock_js_1.getBlock, 'getBlock')({});\n      if (typeof chain?.fees?.estimateFeesPerGas === 'function') {\n        var fees = yield chain.fees.estimateFeesPerGas({\n          block: block_,\n          client,\n          multiply,\n          request,\n          type\n        });\n        if (fees !== null) return fees;\n      }\n      if (type === 'eip1559') {\n        if (typeof block.baseFeePerGas !== 'bigint') throw new fee_js_1.Eip1559FeesNotSupportedError();\n        var maxPriorityFeePerGas = typeof request?.maxPriorityFeePerGas === 'bigint' ? request.maxPriorityFeePerGas : yield (0, estimateMaxPriorityFeePerGas_js_1.internal_estimateMaxPriorityFeePerGas)(client, {\n          block: block,\n          chain,\n          request\n        });\n        var baseFeePerGas = multiply(block.baseFeePerGas);\n        var maxFeePerGas = request?.maxFeePerGas ?? baseFeePerGas + maxPriorityFeePerGas;\n        return {\n          maxFeePerGas,\n          maxPriorityFeePerGas\n        };\n      }\n      var gasPrice = request?.gasPrice ?? multiply(yield (0, getAction_js_1.getAction)(client, getGasPrice_js_1.getGasPrice, 'getGasPrice')({}));\n      return {\n        gasPrice\n      };\n    });\n    return _internal_estimateFeesPerGas.apply(this, arguments);\n  }\n});","lineCount":80,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_asyncToGenerator"],[4,23,1,13],[4,26,1,13,"require"],[4,33,1,13],[4,34,1,13,"_dependencyMap"],[4,48,1,13],[5,2,2,0,"Object"],[5,8,2,6],[5,9,2,7,"defineProperty"],[5,23,2,21],[5,24,2,22,"exports"],[5,31,2,29],[5,33,2,31],[5,45,2,43],[5,47,2,45],[6,4,2,47,"value"],[6,9,2,52],[6,11,2,54],[7,2,2,59],[7,3,2,60],[7,4,2,61],[8,2,3,0,"exports"],[8,9,3,7],[8,10,3,8,"estimateFeesPerGas"],[8,28,3,26],[8,31,3,29,"estimateFeesPerGas"],[8,49,3,47],[9,2,4,0,"exports"],[9,9,4,7],[9,10,4,8,"internal_estimateFeesPerGas"],[9,37,4,35],[9,40,4,38,"internal_estimateFeesPerGas"],[9,67,4,65],[10,2,5,0],[10,6,5,6,"fee_js_1"],[10,14,5,14],[10,17,5,17,"require"],[10,24,5,24],[10,25,5,24,"_dependencyMap"],[10,39,5,24],[10,65,5,46],[10,66,5,47],[11,2,6,0],[11,6,6,6,"getAction_js_1"],[11,20,6,20],[11,23,6,23,"require"],[11,30,6,30],[11,31,6,30,"_dependencyMap"],[11,45,6,30],[11,76,6,57],[11,77,6,58],[12,2,7,0],[12,6,7,6,"estimateMaxPriorityFeePerGas_js_1"],[12,39,7,39],[12,42,7,42,"require"],[12,49,7,49],[12,50,7,49,"_dependencyMap"],[12,64,7,49],[12,104,7,85],[12,105,7,86],[13,2,8,0],[13,6,8,6,"getBlock_js_1"],[13,19,8,19],[13,22,8,22,"require"],[13,29,8,29],[13,30,8,29,"_dependencyMap"],[13,44,8,29],[13,64,8,45],[13,65,8,46],[14,2,9,0],[14,6,9,6,"getGasPrice_js_1"],[14,22,9,22],[14,25,9,25,"require"],[14,32,9,32],[14,33,9,32,"_dependencyMap"],[14,47,9,32],[14,70,9,51],[14,71,9,52],[15,2,9,53],[15,11,10,15,"estimateFeesPerGas"],[15,29,10,33,"estimateFeesPerGas"],[15,30,10,33,"_x"],[15,32,10,33],[15,34,10,33,"_x2"],[15,37,10,33],[16,4,10,33],[16,11,10,33,"_estimateFeesPerGas"],[16,30,10,33],[16,31,10,33,"apply"],[16,36,10,33],[16,43,10,33,"arguments"],[16,52,10,33],[17,2,10,33],[18,2,10,33],[18,11,10,33,"_estimateFeesPerGas"],[18,31,10,33],[19,4,10,33,"_estimateFeesPerGas"],[19,23,10,33],[19,26,10,33,"_asyncToGenerator"],[19,43,10,33],[19,44,10,0],[19,55,10,34,"client"],[19,61,10,40],[19,63,10,42,"args"],[19,67,10,46],[19,69,10,48],[20,6,11,4],[20,13,11,11,"internal_estimateFeesPerGas"],[20,40,11,38],[20,41,11,39,"client"],[20,47,11,45],[20,49,11,47,"args"],[20,53,11,51],[20,54,11,52],[21,4,12,0],[21,5,12,1],[22,4,12,1],[22,11,12,1,"_estimateFeesPerGas"],[22,30,12,1],[22,31,12,1,"apply"],[22,36,12,1],[22,43,12,1,"arguments"],[22,52,12,1],[23,2,12,1],[24,2,12,1],[24,11,13,15,"internal_estimateFeesPerGas"],[24,38,13,42,"internal_estimateFeesPerGas"],[24,39,13,42,"_x3"],[24,42,13,42],[24,44,13,42,"_x4"],[24,47,13,42],[25,4,13,42],[25,11,13,42,"_internal_estimateFeesPerGas"],[25,39,13,42],[25,40,13,42,"apply"],[25,45,13,42],[25,52,13,42,"arguments"],[25,61,13,42],[26,2,13,42],[27,2,13,42],[27,11,13,42,"_internal_estimateFeesPerGas"],[27,40,13,42],[28,4,13,42,"_internal_estimateFeesPerGas"],[28,32,13,42],[28,35,13,42,"_asyncToGenerator"],[28,52,13,42],[28,53,13,0],[28,64,13,43,"client"],[28,70,13,49],[28,72,13,51,"args"],[28,76,13,55],[28,78,13,57],[29,6,14,4],[29,10,14,4,"_ref"],[29,14,14,4],[29,17,14,80,"args"],[29,21,14,84],[29,25,14,88],[29,26,14,89],[29,27,14,90],[30,8,14,19,"block_"],[30,14,14,25],[30,17,14,25,"_ref"],[30,21,14,25],[30,22,14,12,"block"],[30,27,14,17],[31,8,14,17,"_ref$chain"],[31,18,14,17],[31,21,14,17,"_ref"],[31,25,14,17],[31,26,14,27,"chain"],[31,31,14,32],[32,8,14,27,"chain"],[32,13,14,32],[32,16,14,32,"_ref$chain"],[32,26,14,32],[32,40,14,35,"client"],[32,46,14,41],[32,47,14,42,"chain"],[32,52,14,47],[32,55,14,47,"_ref$chain"],[32,65,14,47],[33,8,14,49,"request"],[33,15,14,56],[33,18,14,56,"_ref"],[33,22,14,56],[33,23,14,49,"request"],[33,30,14,56],[34,8,14,56,"_ref$type"],[34,17,14,56],[34,20,14,56,"_ref"],[34,24,14,56],[34,25,14,58,"type"],[34,29,14,62],[35,8,14,58,"type"],[35,12,14,62],[35,15,14,62,"_ref$type"],[35,24,14,62],[35,38,14,65],[35,47,14,74],[35,50,14,74,"_ref$type"],[35,59,14,74],[36,6,15,4],[36,10,15,10,"baseFeeMultiplier"],[36,27,15,27],[36,36,15,36,"_asyncToGenerator"],[36,53,15,36],[36,54,15,37],[36,67,15,49],[37,8,16,8],[37,12,16,12],[37,19,16,19,"chain"],[37,24,16,24],[37,26,16,26,"fees"],[37,30,16,30],[37,32,16,32,"baseFeeMultiplier"],[37,49,16,49],[37,54,16,54],[37,64,16,64],[37,66,17,12],[37,73,17,19,"chain"],[37,78,17,24],[37,79,17,25,"fees"],[37,83,17,29],[37,84,17,30,"baseFeeMultiplier"],[37,101,17,47],[37,102,17,48],[38,10,18,16,"block"],[38,15,18,21],[38,17,18,23,"block_"],[38,23,18,29],[39,10,19,16,"client"],[39,16,19,22],[40,10,20,16,"request"],[41,8,21,12],[41,9,21,13],[41,10,21,14],[42,8,22,8],[42,15,22,15,"chain"],[42,20,22,20],[42,22,22,22,"fees"],[42,26,22,26],[42,28,22,28,"baseFeeMultiplier"],[42,45,22,45],[42,49,22,49],[42,52,22,52],[43,6,23,4],[43,7,23,5],[43,9,23,7],[43,10,23,8],[44,6,24,4],[44,10,24,8,"baseFeeMultiplier"],[44,27,24,25],[44,30,24,28],[44,31,24,29],[44,33,25,8],[44,39,25,14],[44,43,25,18,"fee_js_1"],[44,51,25,26],[44,52,25,27,"BaseFeeScalarError"],[44,70,25,45],[44,71,25,46],[44,72,25,47],[45,6,26,4],[45,10,26,10,"decimals"],[45,18,26,18],[45,21,26,21,"baseFeeMultiplier"],[45,38,26,38],[45,39,26,39,"toString"],[45,47,26,47],[45,48,26,48],[45,49,26,49],[45,50,26,50,"split"],[45,55,26,55],[45,56,26,56],[45,59,26,59],[45,60,26,60],[45,61,26,61],[45,62,26,62],[45,63,26,63],[45,65,26,65,"length"],[45,71,26,71],[45,75,26,75],[45,76,26,76],[46,6,27,4],[46,10,27,10,"denominator"],[46,21,27,21],[46,24,27,24],[46,26,27,26],[46,30,27,30,"decimals"],[46,38,27,38],[47,6,28,4],[47,10,28,10,"multiply"],[47,18,28,18],[47,21,28,22,"base"],[47,25,28,26],[47,29,28,32,"base"],[47,33,28,36],[47,36,28,39,"BigInt"],[47,42,28,45],[47,43,28,46,"Math"],[47,47,28,50],[47,48,28,51,"ceil"],[47,52,28,55],[47,53,28,56,"baseFeeMultiplier"],[47,70,28,73],[47,73,28,76,"denominator"],[47,84,28,87],[47,85,28,88],[47,86,28,89],[47,89,29,8,"BigInt"],[47,95,29,14],[47,96,29,15,"denominator"],[47,107,29,26],[47,108,29,27],[48,6,30,4],[48,10,30,10,"block"],[48,15,30,15],[48,18,30,18,"block_"],[48,24,30,24],[48,27,31,10,"block_"],[48,33,31,16],[48,42,32,16],[48,43,32,17],[48,44,32,18],[48,46,32,20,"getAction_js_1"],[48,60,32,34],[48,61,32,35,"getAction"],[48,70,32,44],[48,72,32,46,"client"],[48,78,32,52],[48,80,32,54,"getBlock_js_1"],[48,93,32,67],[48,94,32,68,"getBlock"],[48,102,32,76],[48,104,32,78],[48,114,32,88],[48,115,32,89],[48,116,32,90],[48,117,32,91],[48,118,32,92],[48,119,32,93],[49,6,33,4],[49,10,33,8],[49,17,33,15,"chain"],[49,22,33,20],[49,24,33,22,"fees"],[49,28,33,26],[49,30,33,28,"estimateFeesPerGas"],[49,48,33,46],[49,53,33,51],[49,63,33,61],[49,65,33,63],[50,8,34,8],[50,12,34,14,"fees"],[50,16,34,18],[50,25,34,28,"chain"],[50,30,34,33],[50,31,34,34,"fees"],[50,35,34,38],[50,36,34,39,"estimateFeesPerGas"],[50,54,34,57],[50,55,34,58],[51,10,35,12,"block"],[51,15,35,17],[51,17,35,19,"block_"],[51,23,35,25],[52,10,36,12,"client"],[52,16,36,18],[53,10,37,12,"multiply"],[53,18,37,20],[54,10,38,12,"request"],[54,17,38,19],[55,10,39,12,"type"],[56,8,40,8],[56,9,40,9],[56,10,40,11],[57,8,41,8],[57,12,41,12,"fees"],[57,16,41,16],[57,21,41,21],[57,25,41,25],[57,27,42,12],[57,34,42,19,"fees"],[57,38,42,23],[58,6,43,4],[59,6,44,4],[59,10,44,8,"type"],[59,14,44,12],[59,19,44,17],[59,28,44,26],[59,30,44,28],[60,8,45,8],[60,12,45,12],[60,19,45,19,"block"],[60,24,45,24],[60,25,45,25,"baseFeePerGas"],[60,38,45,38],[60,43,45,43],[60,51,45,51],[60,53,46,12],[60,59,46,18],[60,63,46,22,"fee_js_1"],[60,71,46,30],[60,72,46,31,"Eip1559FeesNotSupportedError"],[60,100,46,59],[60,101,46,60],[60,102,46,61],[61,8,47,8],[61,12,47,14,"maxPriorityFeePerGas"],[61,32,47,34],[61,35,47,37],[61,42,47,44,"request"],[61,49,47,51],[61,51,47,53,"maxPriorityFeePerGas"],[61,71,47,73],[61,76,47,78],[61,84,47,86],[61,87,48,14,"request"],[61,94,48,21],[61,95,48,22,"maxPriorityFeePerGas"],[61,115,48,42],[61,124,49,20],[61,125,49,21],[61,126,49,22],[61,128,49,24,"estimateMaxPriorityFeePerGas_js_1"],[61,161,49,57],[61,162,49,58,"internal_estimateMaxPriorityFeePerGas"],[61,199,49,95],[61,201,49,97,"client"],[61,207,49,103],[61,209,49,105],[62,10,50,16,"block"],[62,15,50,21],[62,17,50,23,"block"],[62,22,50,28],[63,10,51,16,"chain"],[63,15,51,21],[64,10,52,16,"request"],[65,8,53,12],[65,9,53,13],[65,10,53,14],[66,8,54,8],[66,12,54,14,"baseFeePerGas"],[66,25,54,27],[66,28,54,30,"multiply"],[66,36,54,38],[66,37,54,39,"block"],[66,42,54,44],[66,43,54,45,"baseFeePerGas"],[66,56,54,58],[66,57,54,59],[67,8,55,8],[67,12,55,14,"maxFeePerGas"],[67,24,55,26],[67,27,55,29,"request"],[67,34,55,36],[67,36,55,38,"maxFeePerGas"],[67,48,55,50],[67,52,55,54,"baseFeePerGas"],[67,65,55,67],[67,68,55,70,"maxPriorityFeePerGas"],[67,88,55,90],[68,8,56,8],[68,15,56,15],[69,10,57,12,"maxFeePerGas"],[69,22,57,24],[70,10,58,12,"maxPriorityFeePerGas"],[71,8,59,8],[71,9,59,9],[72,6,60,4],[73,6,61,4],[73,10,61,10,"gasPrice"],[73,18,61,18],[73,21,61,21,"request"],[73,28,61,28],[73,30,61,30,"gasPrice"],[73,38,61,38],[73,42,62,8,"multiply"],[73,50,62,16],[73,57,62,23],[73,58,62,24],[73,59,62,25],[73,61,62,27,"getAction_js_1"],[73,75,62,41],[73,76,62,42,"getAction"],[73,85,62,51],[73,87,62,53,"client"],[73,93,62,59],[73,95,62,61,"getGasPrice_js_1"],[73,111,62,77],[73,112,62,78,"getGasPrice"],[73,123,62,89],[73,125,62,91],[73,138,62,104],[73,139,62,105],[73,140,62,106],[73,141,62,107],[73,142,62,108],[73,143,62,109],[73,144,62,110],[74,6,63,4],[74,13,63,11],[75,8,64,8,"gasPrice"],[76,6,65,4],[76,7,65,5],[77,4,66,0],[77,5,66,1],[78,4,66,1],[78,11,66,1,"_internal_estimateFeesPerGas"],[78,39,66,1],[78,40,66,1,"apply"],[78,45,66,1],[78,52,66,1,"arguments"],[78,61,66,1],[79,2,66,1],[80,0,66,1],[80,3]],"functionMap":{"names":["<global>","estimateFeesPerGas","internal_estimateFeesPerGas","<anonymous>","multiply"],"mappings":"AAA;ACS;CDE;AEC;qCCE;KDQ;qBEK;2BFC;CFqC"}},"type":"js/module"}]}