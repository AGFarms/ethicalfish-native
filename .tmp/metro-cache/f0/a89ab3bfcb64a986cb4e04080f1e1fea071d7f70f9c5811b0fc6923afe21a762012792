{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":67,"column":32,"index":2653}}],"key":"EU+qeBIKi4KcIzPeK4PbkLqFqVY="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":67,"column":32,"index":2653}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"../../errors/request.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":4,"column":21,"index":119},"end":{"line":4,"column":55,"index":153}}],"key":"De7+e6OpHDMvLcTikHUrC1TDF9U="}},{"name":"../../errors/transport.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":5,"column":23,"index":178},"end":{"line":5,"column":59,"index":214}}],"key":"3O9RZZ5aqMR7xl7gZdyFzSij2Lo="}},{"name":"../../utils/promise/createBatchScheduler.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":6,"column":34,"index":250},"end":{"line":6,"column":88,"index":304}}],"key":"Ae7L5O+EpOtBY0puGWQ9WLiOZ/E="}},{"name":"../../utils/rpc/http.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":7,"column":18,"index":324},"end":{"line":7,"column":52,"index":358}}],"key":"y9iGYZzdG+9Qt7RzNIUMR20MxIQ="}},{"name":"./createTransport.js","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":8,"column":29,"index":389},"end":{"line":8,"column":60,"index":420}}],"key":"zr7a0xQkLAysUze0H3cD5eiTvKk="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _slicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _asyncToGenerator = require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.http = http;\n  var request_js_1 = require(_dependencyMap[2], \"../../errors/request.js\");\n  var transport_js_1 = require(_dependencyMap[3], \"../../errors/transport.js\");\n  var createBatchScheduler_js_1 = require(_dependencyMap[4], \"../../utils/promise/createBatchScheduler.js\");\n  var http_js_1 = require(_dependencyMap[5], \"../../utils/rpc/http.js\");\n  var createTransport_js_1 = require(_dependencyMap[6], \"./createTransport.js\");\n  function http(url) {\n    var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var batch = config.batch,\n      fetchOptions = config.fetchOptions,\n      _config$key = config.key,\n      key = _config$key === void 0 ? 'http' : _config$key,\n      methods = config.methods,\n      _config$name = config.name,\n      name = _config$name === void 0 ? 'HTTP JSON-RPC' : _config$name,\n      onFetchRequest = config.onFetchRequest,\n      onFetchResponse = config.onFetchResponse,\n      retryDelay = config.retryDelay;\n    return _ref => {\n      var chain = _ref.chain,\n        retryCount_ = _ref.retryCount,\n        timeout_ = _ref.timeout;\n      var _ref2 = typeof batch === 'object' ? batch : {},\n        _ref2$batchSize = _ref2.batchSize,\n        batchSize = _ref2$batchSize === void 0 ? 1000 : _ref2$batchSize,\n        _ref2$wait = _ref2.wait,\n        wait = _ref2$wait === void 0 ? 0 : _ref2$wait;\n      var retryCount = config.retryCount ?? retryCount_;\n      var timeout = timeout_ ?? config.timeout ?? 10_000;\n      var url_ = url || chain?.rpcUrls.default.http[0];\n      if (!url_) throw new transport_js_1.UrlRequiredError();\n      var rpcClient = (0, http_js_1.getHttpRpcClient)(url_, {\n        fetchOptions,\n        onRequest: onFetchRequest,\n        onResponse: onFetchResponse,\n        timeout\n      });\n      return (0, createTransport_js_1.createTransport)({\n        key,\n        methods,\n        name,\n        request(_ref3) {\n          return _asyncToGenerator(function* () {\n            var method = _ref3.method,\n              params = _ref3.params;\n            var body = {\n              method,\n              params\n            };\n            var _ref4 = (0, createBatchScheduler_js_1.createBatchScheduler)({\n                id: url_,\n                wait,\n                shouldSplitBatch(requests) {\n                  return requests.length > batchSize;\n                },\n                fn: body => rpcClient.request({\n                  body\n                }),\n                sort: (a, b) => a.id - b.id\n              }),\n              schedule = _ref4.schedule;\n            var fn = /*#__PURE__*/function () {\n              var _ref5 = _asyncToGenerator(function* (body) {\n                return batch ? schedule(body) : [yield rpcClient.request({\n                  body\n                })];\n              });\n              return function fn(_x) {\n                return _ref5.apply(this, arguments);\n              };\n            }();\n            var _yield$fn = yield fn(body),\n              _yield$fn2 = _slicedToArray(_yield$fn, 1),\n              _yield$fn2$ = _yield$fn2[0],\n              error = _yield$fn2$.error,\n              result = _yield$fn2$.result;\n            if (error) throw new request_js_1.RpcRequestError({\n              body,\n              error,\n              url: url_\n            });\n            return result;\n          })();\n        },\n        retryCount,\n        retryDelay,\n        timeout,\n        type: 'http'\n      }, {\n        fetchOptions,\n        url: url_\n      });\n    };\n  }\n});","lineCount":103,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_slicedToArray"],[4,20,1,13],[4,23,1,13,"require"],[4,30,1,13],[4,31,1,13,"_dependencyMap"],[4,45,1,13],[5,2,1,13],[5,6,1,13,"_asyncToGenerator"],[5,23,1,13],[5,26,1,13,"require"],[5,33,1,13],[5,34,1,13,"_dependencyMap"],[5,48,1,13],[6,2,2,0,"Object"],[6,8,2,6],[6,9,2,7,"defineProperty"],[6,23,2,21],[6,24,2,22,"exports"],[6,31,2,29],[6,33,2,31],[6,45,2,43],[6,47,2,45],[7,4,2,47,"value"],[7,9,2,52],[7,11,2,54],[8,2,2,59],[8,3,2,60],[8,4,2,61],[9,2,3,0,"exports"],[9,9,3,7],[9,10,3,8,"http"],[9,14,3,12],[9,17,3,15,"http"],[9,21,3,19],[10,2,4,0],[10,6,4,6,"request_js_1"],[10,18,4,18],[10,21,4,21,"require"],[10,28,4,28],[10,29,4,28,"_dependencyMap"],[10,43,4,28],[10,73,4,54],[10,74,4,55],[11,2,5,0],[11,6,5,6,"transport_js_1"],[11,20,5,20],[11,23,5,23,"require"],[11,30,5,30],[11,31,5,30,"_dependencyMap"],[11,45,5,30],[11,77,5,58],[11,78,5,59],[12,2,6,0],[12,6,6,6,"createBatchScheduler_js_1"],[12,31,6,31],[12,34,6,34,"require"],[12,41,6,41],[12,42,6,41,"_dependencyMap"],[12,56,6,41],[12,106,6,87],[12,107,6,88],[13,2,7,0],[13,6,7,6,"http_js_1"],[13,15,7,15],[13,18,7,18,"require"],[13,25,7,25],[13,26,7,25,"_dependencyMap"],[13,40,7,25],[13,70,7,51],[13,71,7,52],[14,2,8,0],[14,6,8,6,"createTransport_js_1"],[14,26,8,26],[14,29,8,29,"require"],[14,36,8,36],[14,37,8,36,"_dependencyMap"],[14,51,8,36],[14,78,8,59],[14,79,8,60],[15,2,9,0],[15,11,9,9,"http"],[15,15,9,13,"http"],[15,16,9,14,"url"],[15,19,9,17],[15,21,9,32],[16,4,9,32],[16,8,9,19,"config"],[16,14,9,25],[16,17,9,25,"arguments"],[16,26,9,25],[16,27,9,25,"length"],[16,33,9,25],[16,41,9,25,"arguments"],[16,50,9,25],[16,58,9,25,"undefined"],[16,67,9,25],[16,70,9,25,"arguments"],[16,79,9,25],[16,85,9,28],[16,86,9,29],[16,87,9,30],[17,4,10,4],[17,8,10,12,"batch"],[17,13,10,17],[17,16,10,129,"config"],[17,22,10,135],[17,23,10,12,"batch"],[17,28,10,17],[18,6,10,19,"fetchOptions"],[18,18,10,31],[18,21,10,129,"config"],[18,27,10,135],[18,28,10,19,"fetchOptions"],[18,40,10,31],[19,6,10,31,"_config$key"],[19,17,10,31],[19,20,10,129,"config"],[19,26,10,135],[19,27,10,33,"key"],[19,30,10,36],[20,6,10,33,"key"],[20,9,10,36],[20,12,10,36,"_config$key"],[20,23,10,36],[20,37,10,39],[20,43,10,45],[20,46,10,45,"_config$key"],[20,57,10,45],[21,6,10,47,"methods"],[21,13,10,54],[21,16,10,129,"config"],[21,22,10,135],[21,23,10,47,"methods"],[21,30,10,54],[22,6,10,54,"_config$name"],[22,18,10,54],[22,21,10,129,"config"],[22,27,10,135],[22,28,10,56,"name"],[22,32,10,60],[23,6,10,56,"name"],[23,10,10,60],[23,13,10,60,"_config$name"],[23,25,10,60],[23,39,10,63],[23,54,10,78],[23,57,10,78,"_config$name"],[23,69,10,78],[24,6,10,80,"onFetchRequest"],[24,20,10,94],[24,23,10,129,"config"],[24,29,10,135],[24,30,10,80,"onFetchRequest"],[24,44,10,94],[25,6,10,96,"onFetchResponse"],[25,21,10,111],[25,24,10,129,"config"],[25,30,10,135],[25,31,10,96,"onFetchResponse"],[25,46,10,111],[26,6,10,113,"retryDelay"],[26,16,10,123],[26,19,10,129,"config"],[26,25,10,135],[26,26,10,113,"retryDelay"],[26,36,10,123],[27,4,11,4],[27,11,11,11,"_ref"],[27,15,11,11],[27,19,11,70],[28,6,11,70],[28,10,11,14,"chain"],[28,15,11,19],[28,18,11,19,"_ref"],[28,22,11,19],[28,23,11,14,"chain"],[28,28,11,19],[29,8,11,33,"retryCount_"],[29,19,11,44],[29,22,11,44,"_ref"],[29,26,11,44],[29,27,11,21,"retryCount"],[29,37,11,31],[30,8,11,55,"timeout_"],[30,16,11,63],[30,19,11,63,"_ref"],[30,23,11,63],[30,24,11,46,"timeout"],[30,31,11,53],[31,6,12,8],[31,10,12,8,"_ref2"],[31,15,12,8],[31,18,12,47],[31,25,12,54,"batch"],[31,30,12,59],[31,35,12,64],[31,43,12,72],[31,46,12,75,"batch"],[31,51,12,80],[31,54,12,83],[31,55,12,84],[31,56,12,85],[32,8,12,85,"_ref2$batchSize"],[32,23,12,85],[32,26,12,85,"_ref2"],[32,31,12,85],[32,32,12,16,"batchSize"],[32,41,12,25],[33,8,12,16,"batchSize"],[33,17,12,25],[33,20,12,25,"_ref2$batchSize"],[33,35,12,25],[33,49,12,28],[33,53,12,32],[33,56,12,32,"_ref2$batchSize"],[33,71,12,32],[34,8,12,32,"_ref2$wait"],[34,18,12,32],[34,21,12,32,"_ref2"],[34,26,12,32],[34,27,12,34,"wait"],[34,31,12,38],[35,8,12,34,"wait"],[35,12,12,38],[35,15,12,38,"_ref2$wait"],[35,25,12,38],[35,39,12,41],[35,40,12,42],[35,43,12,42,"_ref2$wait"],[35,53,12,42],[36,6,13,8],[36,10,13,14,"retryCount"],[36,20,13,24],[36,23,13,27,"config"],[36,29,13,33],[36,30,13,34,"retryCount"],[36,40,13,44],[36,44,13,48,"retryCount_"],[36,55,13,59],[37,6,14,8],[37,10,14,14,"timeout"],[37,17,14,21],[37,20,14,24,"timeout_"],[37,28,14,32],[37,32,14,36,"config"],[37,38,14,42],[37,39,14,43,"timeout"],[37,46,14,50],[37,50,14,54],[37,56,14,60],[38,6,15,8],[38,10,15,14,"url_"],[38,14,15,18],[38,17,15,21,"url"],[38,20,15,24],[38,24,15,28,"chain"],[38,29,15,33],[38,31,15,35,"rpcUrls"],[38,38,15,42],[38,39,15,43,"default"],[38,46,15,50],[38,47,15,51,"http"],[38,51,15,55],[38,52,15,56],[38,53,15,57],[38,54,15,58],[39,6,16,8],[39,10,16,12],[39,11,16,13,"url_"],[39,15,16,17],[39,17,17,12],[39,23,17,18],[39,27,17,22,"transport_js_1"],[39,41,17,36],[39,42,17,37,"UrlRequiredError"],[39,58,17,53],[39,59,17,54],[39,60,17,55],[40,6,18,8],[40,10,18,14,"rpcClient"],[40,19,18,23],[40,22,18,26],[40,23,18,27],[40,24,18,28],[40,26,18,30,"http_js_1"],[40,35,18,39],[40,36,18,40,"getHttpRpcClient"],[40,52,18,56],[40,54,18,58,"url_"],[40,58,18,62],[40,60,18,64],[41,8,19,12,"fetchOptions"],[41,20,19,24],[42,8,20,12,"onRequest"],[42,17,20,21],[42,19,20,23,"onFetchRequest"],[42,33,20,37],[43,8,21,12,"onResponse"],[43,18,21,22],[43,20,21,24,"onFetchResponse"],[43,35,21,39],[44,8,22,12,"timeout"],[45,6,23,8],[45,7,23,9],[45,8,23,10],[46,6,24,8],[46,13,24,15],[46,14,24,16],[46,15,24,17],[46,17,24,19,"createTransport_js_1"],[46,37,24,39],[46,38,24,40,"createTransport"],[46,53,24,55],[46,55,24,57],[47,8,25,12,"key"],[47,11,25,15],[48,8,26,12,"methods"],[48,15,26,19],[49,8,27,12,"name"],[49,12,27,16],[50,8,28,18,"request"],[50,15,28,25,"request"],[50,16,28,25,"_ref3"],[50,21,28,25],[50,23,28,46],[51,10,28,46],[51,17,28,46,"_asyncToGenerator"],[51,34,28,46],[52,12,28,46],[52,16,28,28,"method"],[52,22,28,34],[52,25,28,34,"_ref3"],[52,30,28,34],[52,31,28,28,"method"],[52,37,28,34],[53,14,28,36,"params"],[53,20,28,42],[53,23,28,42,"_ref3"],[53,28,28,42],[53,29,28,36,"params"],[53,35,28,42],[54,12,29,16],[54,16,29,22,"body"],[54,20,29,26],[54,23,29,29],[55,14,29,31,"method"],[55,20,29,37],[56,14,29,39,"params"],[57,12,29,46],[57,13,29,47],[58,12,30,16],[58,16,30,16,"_ref4"],[58,21,30,16],[58,24,30,37],[58,25,30,38],[58,26,30,39],[58,28,30,41,"createBatchScheduler_js_1"],[58,53,30,66],[58,54,30,67,"createBatchScheduler"],[58,74,30,87],[58,76,30,89],[59,16,31,20,"id"],[59,18,31,22],[59,20,31,24,"url_"],[59,24,31,28],[60,16,32,20,"wait"],[60,20,32,24],[61,16,33,20,"shouldSplitBatch"],[61,32,33,36,"shouldSplitBatch"],[61,33,33,37,"requests"],[61,41,33,45],[61,43,33,47],[62,18,34,24],[62,25,34,31,"requests"],[62,33,34,39],[62,34,34,40,"length"],[62,40,34,46],[62,43,34,49,"batchSize"],[62,52,34,58],[63,16,35,20],[63,17,35,21],[64,16,36,20,"fn"],[64,18,36,22],[64,20,36,25,"body"],[64,24,36,29],[64,28,36,34,"rpcClient"],[64,37,36,43],[64,38,36,44,"request"],[64,45,36,51],[64,46,36,52],[65,18,37,24,"body"],[66,16,38,20],[66,17,38,21],[66,18,38,22],[67,16,39,20,"sort"],[67,20,39,24],[67,22,39,26,"sort"],[67,23,39,27,"a"],[67,24,39,28],[67,26,39,30,"b"],[67,27,39,31],[67,32,39,36,"a"],[67,33,39,37],[67,34,39,38,"id"],[67,36,39,40],[67,39,39,43,"b"],[67,40,39,44],[67,41,39,45,"id"],[68,14,40,16],[68,15,40,17],[68,16,40,18],[69,14,30,24,"schedule"],[69,22,30,32],[69,25,30,32,"_ref4"],[69,30,30,32],[69,31,30,24,"schedule"],[69,39,30,32],[70,12,41,16],[70,16,41,22,"fn"],[70,18,41,24],[71,14,41,24],[71,18,41,24,"_ref5"],[71,23,41,24],[71,26,41,24,"_asyncToGenerator"],[71,43,41,24],[71,44,41,27],[71,55,41,34,"body"],[71,59,41,38],[72,16,41,38],[72,23,41,43,"batch"],[72,28,41,48],[72,31,42,22,"schedule"],[72,39,42,30],[72,40,42,31,"body"],[72,44,42,35],[72,45,42,36],[72,48,43,22],[72,55,44,30,"rpcClient"],[72,64,44,39],[72,65,44,40,"request"],[72,72,44,47],[72,73,44,48],[73,18,45,28,"body"],[74,16,46,24],[74,17,46,25],[74,18,46,26],[74,19,47,21],[75,14,47,21],[76,14,47,21],[76,30,41,22,"fn"],[76,32,41,24,"fn"],[76,33,41,24,"_x"],[76,35,41,24],[77,16,41,24],[77,23,41,24,"_ref5"],[77,28,41,24],[77,29,41,24,"apply"],[77,34,41,24],[77,41,41,24,"arguments"],[77,50,41,24],[78,14,41,24],[79,12,41,24],[79,15,47,21],[80,12,48,16],[80,16,48,16,"_yield$fn"],[80,25,48,16],[80,34,48,50,"fn"],[80,36,48,52],[80,37,48,53,"body"],[80,41,48,57],[80,42,48,58],[81,14,48,58,"_yield$fn2"],[81,24,48,58],[81,27,48,58,"_slicedToArray"],[81,41,48,58],[81,42,48,58,"_yield$fn"],[81,51,48,58],[82,14,48,58,"_yield$fn2$"],[82,25,48,58],[82,28,48,58,"_yield$fn2"],[82,38,48,58],[83,14,48,25,"error"],[83,19,48,30],[83,22,48,30,"_yield$fn2$"],[83,33,48,30],[83,34,48,25,"error"],[83,39,48,30],[84,14,48,32,"result"],[84,20,48,38],[84,23,48,38,"_yield$fn2$"],[84,34,48,38],[84,35,48,32,"result"],[84,41,48,38],[85,12,49,16],[85,16,49,20,"error"],[85,21,49,25],[85,23,50,20],[85,29,50,26],[85,33,50,30,"request_js_1"],[85,45,50,42],[85,46,50,43,"RpcRequestError"],[85,61,50,58],[85,62,50,59],[86,14,51,24,"body"],[86,18,51,28],[87,14,52,24,"error"],[87,19,52,29],[88,14,53,24,"url"],[88,17,53,27],[88,19,53,29,"url_"],[89,12,54,20],[89,13,54,21],[89,14,54,22],[90,12,55,16],[90,19,55,23,"result"],[90,25,55,29],[91,10,55,30],[92,8,56,12],[92,9,56,13],[93,8,57,12,"retryCount"],[93,18,57,22],[94,8,58,12,"retryDelay"],[94,18,58,22],[95,8,59,12,"timeout"],[95,15,59,19],[96,8,60,12,"type"],[96,12,60,16],[96,14,60,18],[97,6,61,8],[97,7,61,9],[97,9,61,11],[98,8,62,12,"fetchOptions"],[98,20,62,24],[99,8,63,12,"url"],[99,11,63,15],[99,13,63,17,"url_"],[100,6,64,8],[100,7,64,9],[100,8,64,10],[101,4,65,4],[101,5,65,5],[102,2,66,0],[103,0,66,1],[103,3]],"functionMap":{"names":["<global>","http","<anonymous>","request","shouldSplitBatch","fn","sort"],"mappings":"AAA;ACQ;WCE;YCiB;oBCK;qBDE;wBEC;sBFE;0BGC,qBH;2BEE;qBFM;aDS;KDS;CDC"}},"type":"js/module"}]}