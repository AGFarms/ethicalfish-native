{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":38,"column":1,"index":2036}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":38,"column":1,"index":2036}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"@onflow/fcl","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":34,"index":34}}],"key":"Ea+7M6u9UlCxV6vTUSMx5Z3nMAU="}},{"name":"./crypto","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":29,"index":64}}],"key":"wuls63NcJvhNXVwIvy5TTpxcQ1c="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.authz = authz;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var fcl = _interopRequireWildcard(require(_dependencyMap[2], \"@onflow/fcl\"));\n  var _crypto = require(_dependencyMap[3], \"./crypto\");\n  function _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\n  function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n  // alias Hex = String\n  // type signable = { message: Hex, voucher: voucher }\n  // type compositeSignature = { addr: String, keyId: Number, signature: Hex }\n  // signingFunction :: signable -> compositeSignature\n  // type account = { tempId: String, addr: String, keyId: Number, signingFunction: signingFunction }\n  // authz :: account -> account\n  function authz(_x, _x2, _x3) {\n    return _authz.apply(this, arguments);\n  }\n  function _authz() {\n    _authz = (0, _asyncToGenerator2.default)(function* (flowAccountAddress, flowAccountKeyId, flowAccountPrivateKey) {\n      return account => {\n        return {\n          // there is stuff in the account that is passed in\n          // you need to make sure its part of what is returned\n          ...account,\n          // the tempId here is a very special and specific case.\n          // what you are usually looking for in a tempId value is a unique string for the address and keyId as a pair\n          // if you have no idea what this is doing, or what it does, or are getting an error in your own\n          // implementation of an authorization function it is recommended that you use a string with the address and keyId in it.\n          // something like... tempId: `${address}-${keyId}`\n          tempId: \"SERVICE_ACCOUNT\",\n          addr: fcl.sansPrefix(flowAccountAddress),\n          // eventually it wont matter if this address has a prefix or not, sadly :'( currently it does matter.\n          keyId: Number(flowAccountKeyId),\n          // must be a number\n          signingFunction: signable => ({\n            addr: fcl.withPrefix(flowAccountAddress),\n            // must match the address that requested the signature, but with a prefix\n            keyId: Number(flowAccountKeyId),\n            // must match the keyId in the account that requested the signature\n            signature: (0, _crypto.sign)(flowAccountPrivateKey, signable.message) // signable.message |> hexToBinArray |> hash |> sign |> binArrayToHex\n            // if you arent in control of the transaction that is being signed we recommend constructing the\n            // message from signable.voucher using the @onflow/encode module\n          })\n        };\n      };\n    });\n    return _authz.apply(this, arguments);\n  }\n});","lineCount":52,"map":[[8,2,1,0],[8,6,1,0,"fcl"],[8,9,1,0],[8,12,1,0,"_interopRequireWildcard"],[8,35,1,0],[8,36,1,0,"require"],[8,43,1,0],[8,44,1,0,"_dependencyMap"],[8,58,1,0],[9,2,2,0],[9,6,2,0,"_crypto"],[9,13,2,0],[9,16,2,0,"require"],[9,23,2,0],[9,24,2,0,"_dependencyMap"],[9,38,2,0],[10,2,2,29],[10,11,2,29,"_getRequireWildcardCache"],[10,36,2,29,"e"],[10,37,2,29],[10,66,2,29,"WeakMap"],[10,73,2,29],[10,92,2,29,"r"],[10,93,2,29],[10,100,2,29,"WeakMap"],[10,107,2,29],[10,111,2,29,"t"],[10,112,2,29],[10,119,2,29,"WeakMap"],[10,126,2,29],[10,138,2,29,"_getRequireWildcardCache"],[10,162,2,29],[10,174,2,29,"_getRequireWildcardCache"],[10,175,2,29,"e"],[10,176,2,29],[10,187,2,29,"e"],[10,188,2,29],[10,191,2,29,"t"],[10,192,2,29],[10,195,2,29,"r"],[10,196,2,29],[10,201,2,29,"e"],[10,202,2,29],[11,2,2,29],[11,11,2,29,"_interopRequireWildcard"],[11,35,2,29,"e"],[11,36,2,29],[11,38,2,29,"r"],[11,39,2,29],[11,48,2,29,"r"],[11,49,2,29],[11,53,2,29,"e"],[11,54,2,29],[11,58,2,29,"e"],[11,59,2,29],[11,60,2,29,"__esModule"],[11,70,2,29],[11,79,2,29,"e"],[11,80,2,29],[11,95,2,29,"e"],[11,96,2,29],[11,119,2,29,"e"],[11,120,2,29],[11,145,2,29,"e"],[11,146,2,29],[11,157,2,29,"default"],[11,164,2,29],[11,166,2,29,"e"],[11,167,2,29],[11,175,2,29,"t"],[11,176,2,29],[11,179,2,29,"_getRequireWildcardCache"],[11,203,2,29],[11,204,2,29,"r"],[11,205,2,29],[11,212,2,29,"t"],[11,213,2,29],[11,217,2,29,"t"],[11,218,2,29],[11,219,2,29,"has"],[11,222,2,29],[11,223,2,29,"e"],[11,224,2,29],[11,234,2,29,"t"],[11,235,2,29],[11,236,2,29,"get"],[11,239,2,29],[11,240,2,29,"e"],[11,241,2,29],[11,248,2,29,"n"],[11,249,2,29],[11,254,2,29,"__proto__"],[11,263,2,29],[11,273,2,29,"a"],[11,274,2,29],[11,277,2,29,"Object"],[11,283,2,29],[11,284,2,29,"defineProperty"],[11,298,2,29],[11,302,2,29,"Object"],[11,308,2,29],[11,309,2,29,"getOwnPropertyDescriptor"],[11,333,2,29],[11,344,2,29,"u"],[11,345,2,29],[11,349,2,29,"e"],[11,350,2,29],[11,370,2,29,"u"],[11,371,2,29],[11,378,2,29,"hasOwnProperty"],[11,392,2,29],[11,393,2,29,"call"],[11,397,2,29],[11,398,2,29,"e"],[11,399,2,29],[11,401,2,29,"u"],[11,402,2,29],[11,411,2,29,"i"],[11,412,2,29],[11,415,2,29,"a"],[11,416,2,29],[11,419,2,29,"Object"],[11,425,2,29],[11,426,2,29,"getOwnPropertyDescriptor"],[11,450,2,29],[11,451,2,29,"e"],[11,452,2,29],[11,454,2,29,"u"],[11,455,2,29],[11,465,2,29,"i"],[11,466,2,29],[11,471,2,29,"i"],[11,472,2,29],[11,473,2,29,"get"],[11,476,2,29],[11,480,2,29,"i"],[11,481,2,29],[11,482,2,29,"set"],[11,485,2,29],[11,489,2,29,"Object"],[11,495,2,29],[11,496,2,29,"defineProperty"],[11,510,2,29],[11,511,2,29,"n"],[11,512,2,29],[11,514,2,29,"u"],[11,515,2,29],[11,517,2,29,"i"],[11,518,2,29],[11,522,2,29,"n"],[11,523,2,29],[11,524,2,29,"u"],[11,525,2,29],[11,529,2,29,"e"],[11,530,2,29],[11,531,2,29,"u"],[11,532,2,29],[11,544,2,29,"n"],[11,545,2,29],[11,546,2,29,"default"],[11,553,2,29],[11,556,2,29,"e"],[11,557,2,29],[11,559,2,29,"t"],[11,560,2,29],[11,564,2,29,"t"],[11,565,2,29],[11,566,2,29,"set"],[11,569,2,29],[11,570,2,29,"e"],[11,571,2,29],[11,573,2,29,"n"],[11,574,2,29],[11,577,2,29,"n"],[11,578,2,29],[12,2,4,0],[13,2,5,0],[14,2,6,0],[15,2,7,0],[16,2,8,0],[17,2,9,0],[18,2,9,0],[18,11,11,22,"authz"],[18,16,11,27,"authz"],[18,17,11,27,"_x"],[18,19,11,27],[18,21,11,27,"_x2"],[18,24,11,27],[18,26,11,27,"_x3"],[18,29,11,27],[19,4,11,27],[19,11,11,27,"_authz"],[19,17,11,27],[19,18,11,27,"apply"],[19,23,11,27],[19,30,11,27,"arguments"],[19,39,11,27],[20,2,11,27],[21,2,11,27],[21,11,11,27,"_authz"],[21,18,11,27],[22,4,11,27,"_authz"],[22,10,11,27],[22,17,11,27,"_asyncToGenerator2"],[22,35,11,27],[22,36,11,27,"default"],[22,43,11,27],[22,45,11,7],[22,56,12,2,"flowAccountAddress"],[22,74,12,28],[22,76,13,2,"flowAccountKeyId"],[22,92,13,26],[22,94,14,2,"flowAccountPrivateKey"],[22,115,14,31],[22,117,15,2],[23,6,16,2],[23,13,16,10,"account"],[23,20,16,22],[23,24,16,27],[24,8,17,4],[24,15,17,11],[25,10,18,6],[26,10,19,6],[27,10,20,6],[27,13,20,9,"account"],[27,20,20,16],[28,10,21,6],[29,10,22,6],[30,10,23,6],[31,10,24,6],[32,10,25,6],[33,10,26,6,"tempId"],[33,16,26,12],[33,18,26,14],[33,35,26,31],[34,10,27,6,"addr"],[34,14,27,10],[34,16,27,12,"fcl"],[34,19,27,15],[34,20,27,16,"sansPrefix"],[34,30,27,26],[34,31,27,27,"flowAccountAddress"],[34,49,27,45],[34,50,27,46],[35,10,27,48],[36,10,28,6,"keyId"],[36,15,28,11],[36,17,28,13,"Number"],[36,23,28,19],[36,24,28,20,"flowAccountKeyId"],[36,40,28,36],[36,41,28,37],[37,10,28,39],[38,10,29,6,"signingFunction"],[38,25,29,21],[38,27,29,24,"signable"],[38,35,29,51],[38,40,29,57],[39,12,30,8,"addr"],[39,16,30,12],[39,18,30,14,"fcl"],[39,21,30,17],[39,22,30,18,"withPrefix"],[39,32,30,28],[39,33,30,29,"flowAccountAddress"],[39,51,30,47],[39,52,30,48],[40,12,30,50],[41,12,31,8,"keyId"],[41,17,31,13],[41,19,31,15,"Number"],[41,25,31,21],[41,26,31,22,"flowAccountKeyId"],[41,42,31,38],[41,43,31,39],[42,12,31,41],[43,12,32,8,"signature"],[43,21,32,17],[43,23,32,19],[43,27,32,19,"sign"],[43,39,32,23],[43,41,32,24,"flowAccountPrivateKey"],[43,62,32,45],[43,64,32,47,"signable"],[43,72,32,55],[43,73,32,56,"message"],[43,80,32,63],[43,81,32,64],[43,82,32,66],[44,12,33,8],[45,12,34,8],[46,10,35,6],[46,11,35,7],[47,8,36,4],[47,9,36,5],[48,6,37,2],[48,7,37,3],[49,4,38,0],[49,5,38,1],[50,4,38,1],[50,11,38,1,"_authz"],[50,17,38,1],[50,18,38,1,"apply"],[50,23,38,1],[50,30,38,1,"arguments"],[50,39,38,1],[51,2,38,1],[52,0,38,1],[52,3]],"functionMap":{"names":["<global>","authz","<anonymous>","signingFunction"],"mappings":"AAA;OCU;SCK;uBCa;QDM;GDE"}},"type":"js/module"}]}