{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"exportNames":["*"],"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":47,"column":37,"index":1449}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _asyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.responseCache = exports.promiseCache = void 0;\n  exports.getCache = getCache;\n  exports.withCache = withCache;\n  exports.promiseCache = new Map();\n  exports.responseCache = new Map();\n  function getCache(cacheKey) {\n    var buildCache = (cacheKey, cache) => ({\n      clear: () => cache.delete(cacheKey),\n      get: () => cache.get(cacheKey),\n      set: data => cache.set(cacheKey, data)\n    });\n    var promise = buildCache(cacheKey, exports.promiseCache);\n    var response = buildCache(cacheKey, exports.responseCache);\n    return {\n      clear: () => {\n        promise.clear();\n        response.clear();\n      },\n      promise,\n      response\n    };\n  }\n  function withCache(_x, _x2) {\n    return _withCache.apply(this, arguments);\n  }\n  function _withCache() {\n    _withCache = _asyncToGenerator(function* (fn, _ref) {\n      var cacheKey = _ref.cacheKey,\n        _ref$cacheTime = _ref.cacheTime,\n        cacheTime = _ref$cacheTime === void 0 ? Number.POSITIVE_INFINITY : _ref$cacheTime;\n      var cache = getCache(cacheKey);\n      var response = cache.response.get();\n      if (response && cacheTime > 0) {\n        var age = new Date().getTime() - response.created.getTime();\n        if (age < cacheTime) return response.data;\n      }\n      var promise = cache.promise.get();\n      if (!promise) {\n        promise = fn();\n        cache.promise.set(promise);\n      }\n      try {\n        var data = yield promise;\n        cache.response.set({\n          created: new Date(),\n          data\n        });\n        return data;\n      } finally {\n        cache.promise.clear();\n      }\n    });\n    return _withCache.apply(this, arguments);\n  }\n});","lineCount":62,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_asyncToGenerator"],[4,23,1,13],[4,26,1,13,"require"],[4,33,1,13],[4,34,1,13,"_dependencyMap"],[4,48,1,13],[5,2,2,0,"Object"],[5,8,2,6],[5,9,2,7,"defineProperty"],[5,23,2,21],[5,24,2,22,"exports"],[5,31,2,29],[5,33,2,31],[5,45,2,43],[5,47,2,45],[6,4,2,47,"value"],[6,9,2,52],[6,11,2,54],[7,2,2,59],[7,3,2,60],[7,4,2,61],[8,2,3,0,"exports"],[8,9,3,7],[8,10,3,8,"responseCache"],[8,23,3,21],[8,26,3,24,"exports"],[8,33,3,31],[8,34,3,32,"promiseCache"],[8,46,3,44],[8,49,3,47],[8,54,3,52],[8,55,3,53],[9,2,4,0,"exports"],[9,9,4,7],[9,10,4,8,"getCache"],[9,18,4,16],[9,21,4,19,"getCache"],[9,29,4,27],[10,2,5,0,"exports"],[10,9,5,7],[10,10,5,8,"withCache"],[10,19,5,17],[10,22,5,20,"withCache"],[10,31,5,29],[11,2,6,0,"exports"],[11,9,6,7],[11,10,6,8,"promiseCache"],[11,22,6,20],[11,25,6,23],[11,29,6,27,"Map"],[11,32,6,30],[11,33,6,31],[11,34,6,32],[12,2,7,0,"exports"],[12,9,7,7],[12,10,7,8,"responseCache"],[12,23,7,21],[12,26,7,24],[12,30,7,28,"Map"],[12,33,7,31],[12,34,7,32],[12,35,7,33],[13,2,8,0],[13,11,8,9,"getCache"],[13,19,8,17,"getCache"],[13,20,8,18,"cacheKey"],[13,28,8,26],[13,30,8,28],[14,4,9,4],[14,8,9,10,"buildCache"],[14,18,9,20],[14,21,9,23,"buildCache"],[14,22,9,24,"cacheKey"],[14,30,9,32],[14,32,9,34,"cache"],[14,37,9,39],[14,43,9,45],[15,6,10,8,"clear"],[15,11,10,13],[15,13,10,15,"clear"],[15,14,10,15],[15,19,10,21,"cache"],[15,24,10,26],[15,25,10,27,"delete"],[15,31,10,33],[15,32,10,34,"cacheKey"],[15,40,10,42],[15,41,10,43],[16,6,11,8,"get"],[16,9,11,11],[16,11,11,13,"get"],[16,12,11,13],[16,17,11,19,"cache"],[16,22,11,24],[16,23,11,25,"get"],[16,26,11,28],[16,27,11,29,"cacheKey"],[16,35,11,37],[16,36,11,38],[17,6,12,8,"set"],[17,9,12,11],[17,11,12,14,"data"],[17,15,12,18],[17,19,12,23,"cache"],[17,24,12,28],[17,25,12,29,"set"],[17,28,12,32],[17,29,12,33,"cacheKey"],[17,37,12,41],[17,39,12,43,"data"],[17,43,12,47],[18,4,13,4],[18,5,13,5],[18,6,13,6],[19,4,14,4],[19,8,14,10,"promise"],[19,15,14,17],[19,18,14,20,"buildCache"],[19,28,14,30],[19,29,14,31,"cacheKey"],[19,37,14,39],[19,39,14,41,"exports"],[19,46,14,48],[19,47,14,49,"promiseCache"],[19,59,14,61],[19,60,14,62],[20,4,15,4],[20,8,15,10,"response"],[20,16,15,18],[20,19,15,21,"buildCache"],[20,29,15,31],[20,30,15,32,"cacheKey"],[20,38,15,40],[20,40,15,42,"exports"],[20,47,15,49],[20,48,15,50,"responseCache"],[20,61,15,63],[20,62,15,64],[21,4,16,4],[21,11,16,11],[22,6,17,8,"clear"],[22,11,17,13],[22,13,17,15,"clear"],[22,14,17,15],[22,19,17,21],[23,8,18,12,"promise"],[23,15,18,19],[23,16,18,20,"clear"],[23,21,18,25],[23,22,18,26],[23,23,18,27],[24,8,19,12,"response"],[24,16,19,20],[24,17,19,21,"clear"],[24,22,19,26],[24,23,19,27],[24,24,19,28],[25,6,20,8],[25,7,20,9],[26,6,21,8,"promise"],[26,13,21,15],[27,6,22,8,"response"],[28,4,23,4],[28,5,23,5],[29,2,24,0],[30,2,24,1],[30,11,25,15,"withCache"],[30,20,25,24,"withCache"],[30,21,25,24,"_x"],[30,23,25,24],[30,25,25,24,"_x2"],[30,28,25,24],[31,4,25,24],[31,11,25,24,"_withCache"],[31,21,25,24],[31,22,25,24,"apply"],[31,27,25,24],[31,34,25,24,"arguments"],[31,43,25,24],[32,2,25,24],[33,2,25,24],[33,11,25,24,"_withCache"],[33,22,25,24],[34,4,25,24,"_withCache"],[34,14,25,24],[34,17,25,24,"_asyncToGenerator"],[34,34,25,24],[34,35,25,0],[34,46,25,25,"fn"],[34,48,25,27],[34,50,25,27,"_ref"],[34,54,25,27],[34,56,25,81],[35,6,25,81],[35,10,25,31,"cacheKey"],[35,18,25,39],[35,21,25,39,"_ref"],[35,25,25,39],[35,26,25,31,"cacheKey"],[35,34,25,39],[36,8,25,39,"_ref$cacheTime"],[36,22,25,39],[36,25,25,39,"_ref"],[36,29,25,39],[36,30,25,41,"cacheTime"],[36,39,25,50],[37,8,25,41,"cacheTime"],[37,17,25,50],[37,20,25,50,"_ref$cacheTime"],[37,34,25,50],[37,48,25,53,"Number"],[37,54,25,59],[37,55,25,60,"POSITIVE_INFINITY"],[37,72,25,77],[37,75,25,77,"_ref$cacheTime"],[37,89,25,77],[38,6,26,4],[38,10,26,10,"cache"],[38,15,26,15],[38,18,26,18,"getCache"],[38,26,26,26],[38,27,26,27,"cacheKey"],[38,35,26,35],[38,36,26,36],[39,6,27,4],[39,10,27,10,"response"],[39,18,27,18],[39,21,27,21,"cache"],[39,26,27,26],[39,27,27,27,"response"],[39,35,27,35],[39,36,27,36,"get"],[39,39,27,39],[39,40,27,40],[39,41,27,41],[40,6,28,4],[40,10,28,8,"response"],[40,18,28,16],[40,22,28,20,"cacheTime"],[40,31,28,29],[40,34,28,32],[40,35,28,33],[40,37,28,35],[41,8,29,8],[41,12,29,14,"age"],[41,15,29,17],[41,18,29,20],[41,22,29,24,"Date"],[41,26,29,28],[41,27,29,29],[41,28,29,30],[41,29,29,31,"getTime"],[41,36,29,38],[41,37,29,39],[41,38,29,40],[41,41,29,43,"response"],[41,49,29,51],[41,50,29,52,"created"],[41,57,29,59],[41,58,29,60,"getTime"],[41,65,29,67],[41,66,29,68],[41,67,29,69],[42,8,30,8],[42,12,30,12,"age"],[42,15,30,15],[42,18,30,18,"cacheTime"],[42,27,30,27],[42,29,31,12],[42,36,31,19,"response"],[42,44,31,27],[42,45,31,28,"data"],[42,49,31,32],[43,6,32,4],[44,6,33,4],[44,10,33,8,"promise"],[44,17,33,15],[44,20,33,18,"cache"],[44,25,33,23],[44,26,33,24,"promise"],[44,33,33,31],[44,34,33,32,"get"],[44,37,33,35],[44,38,33,36],[44,39,33,37],[45,6,34,4],[45,10,34,8],[45,11,34,9,"promise"],[45,18,34,16],[45,20,34,18],[46,8,35,8,"promise"],[46,15,35,15],[46,18,35,18,"fn"],[46,20,35,20],[46,21,35,21],[46,22,35,22],[47,8,36,8,"cache"],[47,13,36,13],[47,14,36,14,"promise"],[47,21,36,21],[47,22,36,22,"set"],[47,25,36,25],[47,26,36,26,"promise"],[47,33,36,33],[47,34,36,34],[48,6,37,4],[49,6,38,4],[49,10,38,8],[50,8,39,8],[50,12,39,14,"data"],[50,16,39,18],[50,25,39,27,"promise"],[50,32,39,34],[51,8,40,8,"cache"],[51,13,40,13],[51,14,40,14,"response"],[51,22,40,22],[51,23,40,23,"set"],[51,26,40,26],[51,27,40,27],[52,10,40,29,"created"],[52,17,40,36],[52,19,40,38],[52,23,40,42,"Date"],[52,27,40,46],[52,28,40,47],[52,29,40,48],[53,10,40,50,"data"],[54,8,40,55],[54,9,40,56],[54,10,40,57],[55,8,41,8],[55,15,41,15,"data"],[55,19,41,19],[56,6,42,4],[56,7,42,5],[56,16,43,12],[57,8,44,8,"cache"],[57,13,44,13],[57,14,44,14,"promise"],[57,21,44,21],[57,22,44,22,"clear"],[57,27,44,27],[57,28,44,28],[57,29,44,29],[58,6,45,4],[59,4,46,0],[59,5,46,1],[60,4,46,1],[60,11,46,1,"_withCache"],[60,21,46,1],[60,22,46,1,"apply"],[60,27,46,1],[60,34,46,1,"arguments"],[60,43,46,1],[61,2,46,1],[62,0,46,1],[62,3]],"functionMap":{"names":["<global>","getCache","buildCache","clear","get","set","withCache"],"mappings":"AAA;ACO;uBCC;eCC,4BD;aEC,yBF;aGC,mCH;MDC;eEI;SFG;CDI;AMC;CNqB"}},"type":"js/module"}]}